<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#FB4747">
    <title data-i18n="pageTitle">AndroGov | Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©</title>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind & Charts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- SweetAlert2 for nice modals -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brandRed: '#FB4747',
                        brandBlue: '#4267B2',
                        brandDark: '#1E293B',
                        brandGray: '#F8FAFC'
                    },
                    fontFamily: {
                        sans: ['Tajawal', 'Inter', 'sans-serif'],
                        en: ['Inter', 'sans-serif']
                    },
                    animation: {
                        'bounce-slow': 'bounce 3s infinite',
                        'fade-in': 'fadeIn 0.3s ease-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @media print { .no-print { display: none !important; } }
        body { transition: opacity 0.2s ease-in-out; }
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 4px; }
        .dark .custom-scroll::-webkit-scrollbar-thumb { background-color: #475569; }
        
        /* Chatbot Animations */
        .chat-window-anim { transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1); transform-origin: bottom left; }
        .chat-bubble { max-width: 85%; padding: 10px 14px; border-radius: 12px; font-size: 0.9rem; line-height: 1.5; word-wrap: break-word; }
        .chat-bubble.bot { background-color: #f1f5f9; color: #334155; border-bottom-right-radius: 2px; }
        .dark .chat-bubble.bot { background-color: #334155; color: #f8fafc; }
        .chat-bubble.user { background-color: #4267B2; color: white; border-bottom-left-radius: 2px; margin-right: auto; }
        
        /* Notification Badge Pulse */
        .notif-pulse { animation: pulse-red 2s infinite; }
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(251, 71, 71, 0.7); }
            70% { box-shadow: 0 0 0 6px rgba(251, 71, 71, 0); }
            100% { box-shadow: 0 0 0 0 rgba(251, 71, 71, 0); }
        }
    </style>
</head>
<body class="bg-brandGray dark:bg-slate-900 text-slate-800 dark:text-slate-100 font-sans transition-colors duration-300">

    <!-- 1. Layout Containers -->
    <div id="sidebar-container" class="no-print"></div>
    
    <div class="main-content-wrapper md:mr-72 transition-all duration-300 flex flex-col min-h-screen">
        <div id="header-container" class="no-print"></div>

        <!-- 2. Main Content -->
        <main class="p-6 space-y-6">
            
            <!-- 2.1 Urgent Alerts (Interactive Now) -->
            <div id="urgent-alert-box" class="bg-white dark:bg-slate-800 rounded-2xl p-1 border-r-4 border-orange-500 shadow-sm flex flex-col md:flex-row items-center justify-between gap-4 overflow-hidden animate-fade-in">
                <div class="p-4 flex items-center gap-4">
                    <div class="w-12 h-12 rounded-full bg-orange-100 dark:bg-orange-500/20 text-orange-600 dark:text-orange-400 flex items-center justify-center text-xl shrink-0">
                        <i class="fa-solid fa-triangle-exclamation"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg dark:text-white" data-i18n="alertTitle">Ø¥Ø¬Ø±Ø§Ø¡ Ù…Ø·Ù„ÙˆØ¨: Ø§Ø¹ØªÙ…Ø§Ø¯ "Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ"</h3>
                        <p class="text-sm text-slate-500 dark:text-slate-400">
                            <span data-i18n="alertDesc">Ù…Ø³ÙˆØ¯Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ù…Ø¬Ù„Ø³. Ø§Ù„Ø±Ø§ÙØ¹:</span> 
                            <span class="font-bold text-slate-700 dark:text-slate-300" data-i18n="uploaderName">Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ</span>
                        </p>
                    </div>
                </div>
                <div class="p-4">
                    <button onclick="openReviewModal()" class="px-6 py-2 bg-brandRed text-white rounded-lg text-sm font-bold shadow-lg shadow-red-500/20 hover:bg-red-700 transition flex items-center gap-2 transform hover:-translate-y-0.5 active:translate-y-0">
                        <i class="fa-solid fa-file-signature"></i> <span data-i18n="reviewBtn">Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ø¹ØªÙ…Ø§Ø¯</span>
                    </button>
                </div>
            </div>

            <!-- 2.2 KPIs Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Capital -->
                <div class="bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs text-slate-500 dark:text-slate-400 font-bold uppercase" data-i18n="kpiCapital">Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…ØµØ¯Ø±</p>
                            <h3 class="text-2xl font-bold mt-1 font-en">6,000,000 <span class="text-xs font-sans text-slate-400" data-i18n="currency">Ø±.Ø³</span></h3>
                        </div>
                        <div class="w-10 h-10 rounded-xl bg-blue-50 dark:bg-blue-900/30 text-blue-600 flex items-center justify-center">
                            <i class="fa-solid fa-coins"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center gap-2 text-xs text-green-500 font-bold bg-green-50 dark:bg-green-900/20 w-fit px-2 py-1 rounded">
                        <i class="fa-solid fa-check"></i> <span data-i18n="fullyPaid">Ù…Ø¯ÙÙˆØ¹ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</span>
                    </div>
                </div>

                <!-- Shareholders Count -->
                <div class="bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs text-slate-500 dark:text-slate-400 font-bold uppercase" data-i18n="kpiShareholders">Ø§Ù„Ù…Ø³Ø§Ù‡Ù…ÙŠÙ†</p>
                            <h3 class="text-2xl font-bold mt-1 font-en" id="shareholder-count">-- <span class="text-xs font-sans text-slate-400" data-i18n="member">Ø¹Ø¶Ùˆ</span></h3>
                        </div>
                        <div class="w-10 h-10 rounded-xl bg-purple-50 dark:bg-purple-900/30 text-purple-600 flex items-center justify-center">
                            <i class="fa-solid fa-users"></i>
                        </div>
                    </div>
                    <div class="mt-4 text-xs text-slate-400 truncate w-full" data-i18n="shareholdersList">
                        ÙˆØ±Ø«Ø© Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠØŒ Ø´Ø±ÙƒØ© Ø¨ÙŠØ¬ÙŠ...
                    </div>
                </div>

                <!-- Employees Count -->
                <div class="bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs text-slate-500 dark:text-slate-400 font-bold uppercase" data-i18n="kpiStaff">Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</p>
                            <h3 class="text-2xl font-bold mt-1 font-en text-brandRed" id="staff-count">--</h3>
                        </div>
                        <div class="w-10 h-10 rounded-xl bg-red-50 dark:bg-red-900/30 text-brandRed flex items-center justify-center">
                            <i class="fa-solid fa-user-tie"></i>
                        </div>
                    </div>
                    <div class="mt-4 flex items-center gap-1 text-xs text-slate-500 dark:text-slate-400">
                        <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
                        <span data-i18n="systemOnline">Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨ÙƒÙØ§Ø¡Ø©</span>
                    </div>
                </div>

                <!-- Compliance -->
                <div class="bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 hover:shadow-md transition">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="text-xs text-slate-500 dark:text-slate-400 font-bold uppercase" data-i18n="kpiComp">Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„</p>
                            <h3 class="text-2xl font-bold mt-1 font-en text-green-600">92%</h3>
                        </div>
                        <div class="w-10 h-10 rounded-xl bg-green-50 dark:bg-green-900/30 text-green-600 flex items-center justify-center">
                            <i class="fa-solid fa-shield-halved"></i>
                        </div>
                    </div>
                    <div class="w-full bg-slate-100 dark:bg-slate-700 h-1.5 rounded-full mt-5 overflow-hidden">
                        <div class="bg-green-500 h-full w-[92%]"></div>
                    </div>
                </div>
            </div>

            <!-- 2.3 Charts & Lists -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                
                <!-- Ownership Structure -->
                <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="font-bold text-slate-700 dark:text-white flex items-center gap-2">
                            <i class="fa-solid fa-chart-pie text-brandBlue"></i> <span data-i18n="chartTitle">Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</span>
                        </h3>
                    </div>
                    <div class="h-48 relative flex justify-center">
                        <canvas id="ownershipChart"></canvas>
                    </div>
                    <div class="mt-6 space-y-3" id="chartLegend"></div>
                </div>

                <!-- Tasks & Operations -->
                <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col lg:col-span-2">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="font-bold text-slate-700 dark:text-white flex items-center gap-2">
                            <i class="fa-solid fa-list-check text-green-500"></i> <span data-i18n="opsTitle">Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©</span>
                        </h3>
                        <span class="bg-slate-100 dark:bg-slate-700 text-xs px-2 py-1 rounded-lg text-slate-500">12 Ù…Ù‡Ù…Ø© Ù†Ø´Ø·Ø©</span>
                    </div>
                    
                    <div class="flex-1 space-y-3 overflow-y-auto max-h-64 pr-2 custom-scroll">
                        <div class="flex gap-3 items-start p-3 rounded-xl bg-slate-50 dark:bg-slate-700/30 border border-slate-100 dark:border-slate-700/50 hover:bg-slate-100 dark:hover:bg-slate-700 transition cursor-pointer group">
                            <div class="mt-1"><input type="checkbox" class="accent-brandRed w-4 h-4 cursor-pointer"></div>
                            <div class="flex-1">
                                <div class="flex justify-between">
                                    <p class="text-sm font-bold text-slate-800 dark:text-white group-hover:text-brandBlue transition" data-i18n="task1">Ø§Ø¹ØªÙ…Ø§Ø¯ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</p>
                                    <span class="text-[10px] bg-red-100 text-red-600 px-2 py-0.5 rounded-full">Ø¹Ø§Ø¬Ù„</span>
                                </div>
                                <p class="text-[10px] text-slate-400 mt-1"><span data-i18n="dueDate">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚</span>: 01/02/2026</p>
                                <div class="flex gap-2 mt-2">
                                    <span class="inline-block bg-yellow-100 text-yellow-700 text-[9px] px-1.5 py-0.5 rounded" data-i18n="gov">Gov</span>
                                    <img src="https://ui-avatars.com/api/?name=H&background=random" class="w-4 h-4 rounded-full" title="Ù‡Ø´Ø§Ù… Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ">
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex gap-3 items-start p-3 rounded-xl bg-slate-50 dark:bg-slate-700/30 border border-slate-100 dark:border-slate-700/50 hover:bg-slate-100 dark:hover:bg-slate-700 transition cursor-pointer">
                            <div class="mt-1"><input type="checkbox" class="accent-brandRed w-4 h-4 cursor-pointer"></div>
                            <div class="flex-1">
                                <p class="text-sm font-bold text-slate-800 dark:text-white" data-i18n="taskPayroll">Ù…Ø±Ø§Ø¬Ø¹Ø© ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø±ÙˆØ§ØªØ¨ (HR)</p>
                                <p class="text-[10px] text-slate-400 mt-1"><span data-i18n="fromLabel">Ù…Ù†</span>: <span data-i18n="senderName">Ù…Ù†ØµÙˆØ± Ø§Ù„ÙŠØ§Ù…ÙŠ</span></p>
                                <span class="inline-block mt-1 bg-blue-100 text-blue-700 text-[9px] px-1.5 py-0.5 rounded" data-i18n="ops">Ops</span>
                            </div>
                        </div>

                        <div class="flex gap-3 items-start p-3 rounded-xl bg-slate-50 dark:bg-slate-700/30 border border-slate-100 dark:border-slate-700/50 hover:bg-slate-100 dark:hover:bg-slate-700 transition cursor-pointer">
                            <div class="mt-1"><input type="checkbox" class="accent-brandRed w-4 h-4 cursor-pointer"></div>
                            <div class="flex-1">
                                <p class="text-sm font-bold text-slate-800 dark:text-white" data-i18n="task3">ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ</p>
                                <p class="text-[10px] text-slate-400 mt-1" data-i18n="ministry">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¬Ø§Ø±Ø©</p>
                                <span class="inline-block mt-1 bg-purple-100 text-purple-700 text-[9px] px-1.5 py-0.5 rounded" data-i18n="legal">Legal</span>
                            </div>
                        </div>
                    </div>
                    <!-- Linked to the new Tasks Page -->
                    <a href="tasks.html" class="mt-4 flex items-center justify-center gap-2 w-full py-2 border border-brandBlue border-dashed rounded-lg text-xs text-brandBlue hover:bg-blue-50 dark:hover:bg-blue-900/20 transition font-bold" data-i18n="viewAll">
                        Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… (12) <i class="fa-solid fa-arrow-left"></i>
                    </a>
                </div>
            </div>

            <!-- 2.4 Live Audit Log -->
            <div class="bg-slate-900 rounded-2xl p-5 shadow-lg text-slate-300 font-mono text-xs border border-slate-800">
                <div class="flex justify-between items-center mb-3 border-b border-slate-700 pb-3">
                    <span class="flex items-center gap-2 font-bold text-white"><i class="fa-solid fa-terminal text-brandRed"></i> <span data-i18n="auditTitle">Ø³Ø¬Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</span></span>
                    <span class="flex items-center gap-2 text-green-400"><span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span> Live</span>
                </div>
                <div class="space-y-2 h-32 overflow-y-auto custom-scroll" id="audit-log-container">
                    <!-- Logs via JS -->
                </div>
            </div>

        </main>
    </div>

    <!-- AI Chatbot Widget -->
    <div id="andro-bot-container" class="fixed bottom-6 left-6 z-50 flex flex-col items-start gap-4" dir="rtl">
        <div id="chat-window" class="hidden bg-white dark:bg-slate-800 w-80 md:w-96 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col chat-window-anim" style="height: 500px; max-height: 70vh;">
            <div class="bg-brandBlue p-4 flex justify-between items-center text-white">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center"><i class="fa-solid fa-robot"></i></div>
                    <div><h4 class="font-bold text-sm">AndroBot</h4><p class="text-[10px] text-white/80">Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø­ÙˆÙƒÙ…Ø© Ø§Ù„Ø°ÙƒÙŠ</p></div>
                </div>
                <button id="close-chat-btn" class="text-white/80 hover:text-white transition"><i class="fa-solid fa-times"></i></button>
            </div>
            <div id="chat-body" class="flex-1 p-4 bg-slate-50 dark:bg-slate-900/50 overflow-y-auto custom-scroll space-y-3 flex flex-col">
                <div class="chat-bubble bot">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ğŸ‘‹<br>Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø¤Ø§Ù„ÙŠ Ø¹Ù†:<br>â€¢ Ø­Ø§Ù„Ø© Ø§Ù„Ù†ØµØ§Ø¨ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ<br>â€¢ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª<br>â€¢ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</div>
            </div>
            <div class="p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 flex gap-2">
                <input type="text" id="chat-input" placeholder="Ø§ÙƒØªØ¨..." class="flex-1 bg-slate-100 dark:bg-slate-900 border-none rounded-lg text-sm px-4 py-2 focus:ring-2 focus:ring-brandBlue outline-none dark:text-white">
                <button id="send-btn" class="w-10 h-10 rounded-lg bg-brandBlue text-white hover:bg-blue-700 transition flex items-center justify-center"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>
        <button id="chat-fab" class="w-14 h-14 bg-brandBlue hover:bg-blue-700 text-white rounded-full shadow-lg shadow-blue-600/30 flex items-center justify-center text-2xl transition-all transform hover:scale-110 active:scale-95 animate-bounce-slow">
            <i class="fa-solid fa-comment-dots"></i>
            <span class="absolute top-0 right-0 w-4 h-4 bg-brandRed rounded-full border-2 border-white dark:border-slate-900"></span>
        </button>
    </div>

    <!-- 3. Embedded Scripts -->
    <script>
        // ==========================================
        // A. DATA REPOSITORY
        // ==========================================
        const SYSTEM_DATA = {
            users: [
                { id: "USR_000", name: { ar: "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø­ÙˆØ§Ø³", en: "Abdullah Al-Hawas" }, title: { ar: "Ø±Ø¦ÙŠØ³ Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©", en: "Chairman of the Board" }, dept: "DEP_EXEC", role_ref: "chairman", email: "amh400@gmail.com" },
                { id: "USR_001", name: { ar: "Ù‡Ø´Ø§Ù… Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ", en: "Hesham Al-Sohaibani" }, title: { ar: "Ø§Ù„Ø±Ø¦ÙŠØ³ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ ÙˆÙ†Ø§Ø¦Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³", en: "CEO & Board Vice Chairman" }, dept: "DEP_EXEC", role_ref: "ceo", email: "hesham@androomeda.com" },
                { id: "USR_004", name: { ar: "Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ", en: "Ayman Al-Maghrabi" }, title: { ar: "Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø­ÙˆÙƒÙ…Ø© / Ø£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±", en: "GRCO / Board Secretary" }, dept: "DEP_COMP", role_ref: "manager", email: "amaghrabi@androomeda.com" },
                // ... (Assume other users exist as per original file)
            ],
            shareholders: [
                { id: "SH_001", name: { ar: "ÙˆØ±Ø«Ø© Ù…Ø­Ù…Ø¯ Ø¨Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ", en: "Heirs of Mohammed Al-Suhaibani" }, email: "alcaseer@gmail.com", percent: 35 },
                { id: "SH_002", name: { ar: "Ù‡Ø´Ø§Ù… Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ", en: "Hesham bin Muhammad Al-Sohibani" }, email: "Hesham@androomeda.com", percent: 10 },
                { id: "SH_010", name: { ar: "Ø´Ø±ÙƒØ© Ø¨ÙŠØ¬ÙŠ Ø§Ù„Ù…Ø­Ø¯ÙˆØ¯Ø©", en: "BG LTD.Company" }, email: "saleh@bgtech.com", percent: 15 },
                { id: "SH_011", name: { ar: "Ø§Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„ÙŠÙ…Ø§Ù† Ø§Ù„Ø¬Ø§Ø³Ø±", en: "Ahmed bin Suleiman Al-Jasser" }, email: "ahmed.jasser@gmail.com", percent: 5 }
                // ... (Others for chart)
            ],
            notifications: [
                { id: 1, title: "Ø³ÙŠØ§Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©", msg: "ØªÙ… Ø±ÙØ¹ Ù…Ø³ÙˆØ¯Ø© Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ù„Ù„Ø§Ø¹ØªÙ…Ø§Ø¯", time: "Ù…Ù†Ø° 10 Ø¯Ù‚Ø§Ø¦Ù‚", read: false, type: "urgent" },
                { id: 2, title: "Ø§Ø¬ØªÙ…Ø§Ø¹ Ù…Ø¬Ù„Ø³", msg: "ØªØ°ÙƒÙŠØ±: Ø§Ø¬ØªÙ…Ø§Ø¹ Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠ ØºØ¯Ø§Ù‹", time: "Ù…Ù†Ø° Ø³Ø§Ø¹Ø©", read: false, type: "info" },
                { id: 3, title: "Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ù†ØµØ§Ø¨", msg: "ØªÙ… Ø§ÙƒØªÙ…Ø§Ù„ Ù†ØµØ§Ø¨ Ø§Ù„ØªØµÙˆÙŠØª Ø¹Ù„Ù‰ Ù‚Ø±Ø§Ø± ØªØ´ÙƒÙŠÙ„ Ø§Ù„Ù„Ø¬Ù†Ø©", time: "Ù…Ù†Ø° 3 Ø³Ø§Ø¹Ø§Øª", read: true, type: "success" }
            ]
        };

        // ==========================================
        // B. LAYOUT ENGINE (Updated Header)
        // ==========================================
        (function() {
            let currentUser = JSON.parse(localStorage.getItem('currentUser')) || {
                id: "USR_001", name: {ar: "Ù‡Ø´Ø§Ù… Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ", en: "Hesham Al-Sohaibani"}, role: "CEO" // Default to CEO for demo
            };
            const config = {
                lang: localStorage.getItem('lang') || 'ar',
                theme: localStorage.getItem('theme') || 'light'
            };

            const menuStructure = [
                { section: 'main', items: [{ key: 'dash', icon: 'fa-gauge-high', link: 'admin.html' }] },
                { section: 'comm', items: [{ key: 'chat', icon: 'fa-comments', link: '#' }, { key: 'circulars', icon: 'fa-bullhorn', link: '#' }] },
                { section: 'gov', items: [{ key: 'ga', icon: 'fa-users-rectangle', link: '#' }, { key: 'board', icon: 'fa-building-columns', link: '#' }, { key: 'committees', icon: 'fa-people-group', link: '#' }] },
                { section: 'ops', items: [{ key: 'tasks', icon: 'fa-list-check', link: 'tasks.html' }, { key: 'doa', icon: 'fa-sitemap', link: '#' }, { key: 'policies', icon: 'fa-book-open', link: '#' }] },
            ];

            const layoutTrans = {
                ar: {
                    sysName: "AndroGov", sysVer: "Enterprise v4.5", logout: "Ø®Ø±ÙˆØ¬",
                    sections: { main: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", comm: "Ø§Ù„ØªÙˆØ§ØµÙ„", gov: "Ø§Ù„Ø­ÙˆÙƒÙ…Ø©", ops: "Ø§Ù„ØªØ´ØºÙŠÙ„" },
                    menu: { dash: "Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©", chat: "Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©", circulars: "Ø§Ù„ØªØ¹Ø§Ù…ÙŠÙ…", ga: "Ø§Ù„Ø¬Ù…Ø¹ÙŠØ§Øª", board: "Ø§Ù„Ù…Ø¬Ù„Ø³", committees: "Ø§Ù„Ù„Ø¬Ø§Ù†", tasks: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…", doa: "Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª", policies: "Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª" }
                },
                en: {
                    sysName: "AndroGov", sysVer: "Enterprise v4.5", logout: "Logout",
                    sections: { main: "Main", comm: "Comms", gov: "Gov", ops: "Ops" },
                    menu: { dash: "Dashboard", chat: "Chat", circulars: "Circulars", ga: "GA", board: "Board", committees: "Committees", tasks: "Task Manager", doa: "DOA", policies: "Policies" }
                }
            };

            function initLayout() {
                // Ensure user avatar
                if(!currentUser.avatarUrl) currentUser.avatarUrl = `https://ui-avatars.com/api/?name=${encodeURIComponent(currentUser.name.ar)}&background=FB4747&color=fff&bold=true`;
                
                applyLayoutSettings();
                renderSidebar();
                renderHeader();
            }

            function applyLayoutSettings() {
                const html = document.documentElement;
                html.lang = config.lang;
                html.dir = config.lang === 'ar' ? 'rtl' : 'ltr';
                if (config.theme === 'dark') html.classList.add('dark');
            }

            function renderSidebar() {
                const container = document.getElementById('sidebar-container');
                if (!container) return;
                const dict = layoutTrans[config.lang];
                let menuHTML = '';
                menuStructure.forEach(group => {
                    menuHTML += `<div class="px-3 mt-6 mb-2 text-[10px] font-bold text-slate-400 uppercase tracking-wider">${dict.sections[group.section]}</div>`;
                    group.items.forEach(item => {
                        // Highlight Logic
                        const isActive = window.location.href.includes(item.link);
                        const activeClass = isActive ? "bg-brandRed text-white shadow-md shadow-red-500/20" : "text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-brandRed";
                        menuHTML += `
                        <a href="${item.link}" class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 ${activeClass}">
                            <div class="w-6 text-center"><i class="fa-solid ${item.icon}"></i></div>
                            <span class="flex-1 truncate">${dict.menu[item.key]}</span>
                        </a>`;
                    });
                });

                container.innerHTML = `
                <aside class="fixed top-0 ${config.lang === 'ar' ? 'right-0 border-l' : 'left-0 border-r'} z-50 h-screen w-72 flex-col hidden md:flex bg-white dark:bg-[#0F172A] border-slate-200 dark:border-slate-800 transition-all duration-300">
                    <div class="h-20 flex items-center px-6 border-b border-slate-100 dark:border-slate-800">
                        <div class="flex items-center gap-3 w-full">
                            <div class="w-10 h-10 rounded-xl bg-brandRed text-white flex items-center justify-center font-bold text-xl shadow-lg shadow-red-500/30">A</div>
                            <div class="overflow-hidden">
                                <h1 class="font-bold text-sm text-slate-800 dark:text-white font-sans truncate">AndroGov</h1>
                                <p class="text-[10px] text-slate-500 uppercase tracking-widest truncate">${dict.sysVer}</p>
                            </div>
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex items-center gap-3 p-3 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-100 dark:border-slate-700">
                            <img src="${currentUser.avatarUrl}" class="w-10 h-10 rounded-full border-2 border-white dark:border-slate-600 object-cover shrink-0">
                            <div class="overflow-hidden flex-1 min-w-0">
                                <p class="text-sm font-bold text-slate-800 dark:text-white truncate">${currentUser.name.ar}</p>
                                <p class="text-[10px] text-brandRed font-medium truncate">${currentUser.role}</p>
                            </div>
                        </div>
                    </div>
                    <nav class="flex-1 overflow-y-auto px-3 py-2 custom-scroll space-y-0.5">${menuHTML}</nav>
                </aside>`;
            }

            function renderHeader() {
                const container = document.getElementById('header-container');
                if (!container) return;
                
                // Notification Logic
                const unreadCount = SYSTEM_DATA.notifications.filter(n => !n.read).length;
                const badgeHTML = unreadCount > 0 ? `<span class="absolute top-1 right-1 w-4 h-4 bg-brandRed text-white text-[10px] font-bold flex items-center justify-center rounded-full notif-pulse">${unreadCount}</span>` : '';

                container.innerHTML = `
                <header class="h-20 sticky top-0 z-40 flex items-center justify-between px-6 bg-white/80 dark:bg-[#0F172A]/90 backdrop-blur-md border-b border-slate-200 dark:border-slate-800 transition-all no-print">
                    <div class="flex items-center gap-4">
                        <button onclick="document.querySelector('aside').classList.toggle('hidden'); document.querySelector('aside').classList.toggle('flex');" class="md:hidden text-slate-500 dark:text-slate-200 hover:text-brandRed"><i class="fa-solid fa-bars text-xl"></i></button>
                        <h2 class="text-lg font-bold text-slate-700 dark:text-white hidden sm:block">Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©</h2>
                    </div>
                    <div class="flex items-center gap-3">
                        <!-- Notification Bell (NEW) -->
                        <div class="relative">
                            <button onclick="toggleNotifDropdown()" class="w-10 h-10 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300 transition relative">
                                <i class="fa-regular fa-bell text-lg"></i>
                                ${badgeHTML}
                            </button>
                            <!-- Dropdown -->
                            <div id="notif-dropdown" class="hidden absolute top-12 left-0 w-80 bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-100 dark:border-slate-700 z-50 overflow-hidden animate-fade-in">
                                <div class="p-3 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center">
                                    <span class="font-bold text-sm dark:text-white">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span>
                                    <span class="text-xs text-brandBlue cursor-pointer hover:underline">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡</span>
                                </div>
                                <div class="max-h-64 overflow-y-auto custom-scroll p-2 space-y-2">
                                    ${SYSTEM_DATA.notifications.map(n => `
                                        <div class="p-3 rounded-lg ${n.read ? 'bg-transparent opacity-60' : 'bg-blue-50 dark:bg-slate-700/50'} hover:bg-slate-100 dark:hover:bg-slate-700 transition cursor-pointer flex gap-3">
                                            <div class="w-2 h-2 rounded-full ${n.type === 'urgent' ? 'bg-red-500' : 'bg-brandBlue'} mt-2 shrink-0"></div>
                                            <div>
                                                <p class="text-xs font-bold text-slate-800 dark:text-white">${n.title}</p>
                                                <p class="text-[10px] text-slate-500 dark:text-slate-400 mt-0.5">${n.msg}</p>
                                                <p class="text-[9px] text-slate-400 mt-1">${n.time}</p>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="p-2 border-t border-slate-100 dark:border-slate-700 text-center">
                                    <a href="#" class="text-xs font-bold text-brandBlue hover:underline">Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</a>
                                </div>
                            </div>
                        </div>

                        <button onclick="window.changeTheme()" class="w-10 h-10 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-600 dark:text-yellow-400 transition"><i class="fa-solid ${config.theme === 'dark' ? 'fa-sun' : 'fa-moon'}"></i></button>
                        <div class="h-6 w-px bg-slate-200 dark:bg-slate-700 mx-1"></div>
                        <button onclick="window.doLogout()" class="text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-1.5 rounded-lg text-xs font-bold transition flex items-center gap-2"><i class="fa-solid fa-power-off"></i></button>
                    </div>
                </header>`;
            }

            initLayout();
        })();

        // ==========================================
        // C. INTERACTIVE FUNCTIONS
        // ==========================================
        
        // 1. Notification Toggle
        function toggleNotifDropdown() {
            const el = document.getElementById('notif-dropdown');
            el.classList.toggle('hidden');
        }

        // 2. Review Modal (SweetAlert2)
        function openReviewModal() {
            Swal.fire({
                title: '<strong>Ù…Ø±Ø§Ø¬Ø¹Ø©: Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</strong>',
                html: `
                    <div class="text-right text-sm">
                        <div class="bg-slate-50 dark:bg-slate-700 p-4 rounded-lg mb-4 text-slate-600 dark:text-slate-300">
                            <p class="mb-2"><strong class="text-brandBlue">Ø±Ù‚Ù… Ø§Ù„Ù†Ø³Ø®Ø©:</strong> v3.2</p>
                            <p class="mb-2"><strong class="text-brandBlue">Ø§Ù„Ø±Ø§ÙØ¹:</strong> Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ</p>
                            <p class="mb-2"><strong class="text-brandBlue">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø±ÙØ¹:</strong> 2025-07-27</p>
                            <p><strong class="text-brandBlue">Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:</strong> ØªØ­Ø¯ÙŠØ« Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯.</p>
                        </div>
                        <div class="flex gap-2 justify-center mb-2">
                            <button class="px-3 py-1 bg-slate-200 rounded text-xs hover:bg-slate-300"><i class="fa-solid fa-eye"></i> Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ù</button>
                            <button class="px-3 py-1 bg-slate-200 rounded text-xs hover:bg-slate-300"><i class="fa-solid fa-code-compare"></i> Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù†Ø³Ø®</button>
                        </div>
                    </div>
                `,
                showDenyButton: true,
                showCancelButton: true,
                confirmButtonText: '<i class="fa-solid fa-check"></i> Ø§Ø¹ØªÙ…Ø§Ø¯',
                denyButtonText: '<i class="fa-solid fa-rotate-left"></i> Ø·Ù„Ø¨ ØªØ¹Ø¯ÙŠÙ„',
                cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡',
                confirmButtonColor: '#10B981',
                denyButtonColor: '#F59E0B',
                customClass: {
                    popup: 'dark:bg-slate-800 dark:text-white'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    // Logic to approve
                    Swal.fire({
                        title: 'ØªÙ… Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯!',
                        text: 'ØªÙ… ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø¯Ù„ÙŠÙ„ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†.',
                        icon: 'success',
                        confirmButtonColor: '#4267B2'
                    });
                    // Hide alert from dashboard
                    const alertBox = document.getElementById('urgent-alert-box');
                    if(alertBox) {
                        alertBox.classList.add('opacity-50', 'pointer-events-none');
                        alertBox.querySelector('h3').innerText = 'ØªÙ… Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¨Ù†Ø¬Ø§Ø­ âœ…';
                        alertBox.querySelector('button').style.display = 'none';
                    }
                    // Add Log
                    addLog('System', 'ØªÙ… Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ (v3.2) Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ', 'text-green-400');
                } else if (result.isDenied) {
                    Swal.fire('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„', 'ØªÙ„Ù‚Ù‰ Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ.', 'info');
                }
            });
        }

        // 3. Chart Logic
        function initPage() {
            const ctx = document.getElementById('ownershipChart').getContext('2d');
            const data = {
                labels: ['ÙˆØ±Ø«Ø© Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ', 'Ù‡Ø´Ø§Ù… Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ', 'Ø´Ø±ÙƒØ© Ø¨ÙŠØ¬ÙŠ', 'Ø¢Ø®Ø±ÙˆÙ†'],
                datasets: [{
                    data: [35, 10, 15, 40],
                    backgroundColor: ['#FB4747', '#4267B2', '#10B981', '#CBD5E1'],
                    borderWidth: 0,
                    hoverOffset: 10
                }]
            };
            
            new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    cutout: '75%'
                }
            });

            // Populate Legend
            document.getElementById('chartLegend').innerHTML = `
                <div class="flex justify-between items-center text-xs">
                    <span class="flex items-center gap-2 text-slate-600 dark:text-slate-300"><span class="w-2 h-2 rounded-full bg-brandRed"></span> ÙˆØ±Ø«Ø© Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ</span>
                    <span class="font-bold font-en">35%</span>
                </div>
                <div class="flex justify-between items-center text-xs">
                    <span class="flex items-center gap-2 text-slate-600 dark:text-slate-300"><span class="w-2 h-2 rounded-full bg-blue-500"></span> Ù‡Ø´Ø§Ù… Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ</span>
                    <span class="font-bold font-en">10%</span>
                </div>
                <div class="flex justify-between items-center text-xs">
                    <span class="flex items-center gap-2 text-slate-600 dark:text-slate-300"><span class="w-2 h-2 rounded-full bg-green-500"></span> Ø´Ø±ÙƒØ© Ø¨ÙŠØ¬ÙŠ</span>
                    <span class="font-bold font-en">15%</span>
                </div>
                <div class="flex justify-between items-center text-xs">
                    <span class="flex items-center gap-2 text-slate-600 dark:text-slate-300"><span class="w-2 h-2 rounded-full bg-slate-300"></span> Ø¢Ø®Ø±ÙˆÙ†</span>
                    <span class="font-bold font-en">40%</span>
                </div>
            `;

            // Initial Logs
            addLog('System', 'Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… v4.5', 'text-green-400');
            addLog('Ayman', 'Ø±ÙØ¹ Ù…Ø³ÙˆØ¯Ø© Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ', 'text-blue-400');
            addLog('Security', 'Ù…Ø­Ø§ÙˆÙ„Ø© Ø¯Ø®ÙˆÙ„ ÙØ§Ø´Ù„Ø© IP 192.168.1.5', 'text-red-400');
            
            // Fill Counts
            document.getElementById('shareholder-count').innerHTML = `11 <span class="text-xs font-sans text-slate-400">Ø¹Ø¶Ùˆ</span>`;
            document.getElementById('staff-count').innerText = "24"; // Dummy count
        }

        function addLog(user, msg, color) {
            const container = document.getElementById('audit-log-container');
            const time = new Date().toLocaleTimeString('en-US', {hour12: false, hour: "2-digit", minute: "2-digit"});
            const html = `
                <div class="flex gap-3 hover:bg-slate-800/50 p-1 rounded transition cursor-default animate-fade-in">
                    <span class="text-slate-500 w-16 shrink-0">[${time}]</span>
                    <span class="${color} font-bold w-16 shrink-0 truncate">${user}</span>
                    <span class="text-slate-400 truncate flex-1">${msg}</span>
                </div>
            `;
            container.insertAdjacentHTML('afterbegin', html);
        }

        // Global Utility
        window.changeTheme = () => {
            const current = localStorage.getItem('theme');
            const next = current === 'dark' ? 'light' : 'dark';
            localStorage.setItem('theme', next);
            location.reload();
        }
        
        window.doLogout = () => {
            Swal.fire({
                title: 'Ù‡Ù„ ØªÙˆØ¯ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Ù†Ø¹Ù…ØŒ Ø®Ø±ÙˆØ¬',
                cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡'
            }).then((res) => {
                if(res.isConfirmed) location.reload(); // Just reload for demo
            });
        }

        // Run Init
        document.addEventListener('DOMContentLoaded', initPage);

        // Chatbot logic
        document.getElementById('chat-fab').addEventListener('click', () => {
            document.getElementById('chat-window').classList.remove('hidden');
            document.getElementById('chat-window').classList.add('flex');
        });
        document.getElementById('close-chat-btn').addEventListener('click', () => {
            document.getElementById('chat-window').classList.add('hidden');
            document.getElementById('chat-window').classList.remove('flex');
        });
        
        // Chatbot Simple Reply
        document.getElementById('send-btn').addEventListener('click', () => {
            const input = document.getElementById('chat-input');
            const text = input.value;
            if(!text) return;
            
            const body = document.getElementById('chat-body');
            body.innerHTML += `<div class="chat-bubble user bg-brandBlue text-white self-end mb-2">${text}</div>`;
            input.value = '';
            
            // Auto Reply
            setTimeout(() => {
                let reply = "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ø£ÙÙ‡Ù… Ø§Ù„Ø³Ø¤Ø§Ù„.";
                if(text.includes('Ù†ØµØ§Ø¨')) reply = "Ø§Ù„Ù†ØµØ§Ø¨ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ù„Ù„Ø¬Ù…Ø¹ÙŠØ© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù…ÙƒØªÙ…Ù„ Ø¨Ù†Ø³Ø¨Ø© 52%.";
                if(text.includes('Ù…ÙƒØ§ÙØ£Ø©') || text.includes('Ø³ÙŠØ§Ø³Ø©')) reply = "Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ù…Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ.";
                if(text.includes('Ù…Ù‡Ø§Ù…')) reply = "Ù„Ø¯ÙŠÙƒ 3 Ù…Ù‡Ø§Ù… Ø¹Ø§Ø¬Ù„Ø© ØªØªØ·Ù„Ø¨ ØªØ¯Ø®Ù„Ùƒ.";
                
                body.innerHTML += `<div class="chat-bubble bot bg-slate-100 text-slate-800 mb-2">${reply}</div>`;
                body.scrollTop = body.scrollHeight;
            }, 1000);
        });

    </script>
</body>
</html>
