<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#FB4747">
<link rel="manifest" href="manifest.json">

    <title data-i18n="pageTitle">AndroGov | Ø§Ù„Ù„Ø¬Ø§Ù† Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©</title>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brandRed: '#FB4747',
                        brandBlue: '#4267B2',
                        brandDark: '#1E293B',
                        brandGray: '#F8FAFC'
                    },
                    fontFamily: {
                        sans: ['Tajawal', 'Inter', 'sans-serif'],
                        en: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background: white; }
        }
        /* Inactive Card Effect */
        .committee-inactive {
            filter: grayscale(1);
            opacity: 0.7;
            border-style: dashed;
        }
        /* Wizard Steps */
        .step-active { @apply border-brandBlue text-brandBlue; }
        .step-completed { @apply border-green-500 text-green-500; }
        .step-inactive { @apply border-slate-200 text-slate-400; }
        
        body { transition: opacity 0.2s ease-in-out; }

        /* Bot Styles */
        .chat-window-anim { transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1); transform-origin: bottom left; }
        .chat-bubble { max-width: 85%; padding: 10px 14px; border-radius: 12px; font-size: 0.9rem; line-height: 1.5; word-wrap: break-word; }
        .chat-bubble.bot { background-color: #f1f5f9; color: #334155; border-bottom-right-radius: 2px; }
        .dark .chat-bubble.bot { background-color: #334155; color: #f8fafc; }
        .chat-bubble.user { background-color: #4267B2; color: white; border-bottom-left-radius: 2px; margin-right: auto; }
        .typing-indicator span { display: inline-block; width: 6px; height: 6px; background-color: #94a3b8; border-radius: 50%; animation: typing 1.4s infinite ease-in-out both; margin: 0 1px; }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body class="bg-brandGray dark:bg-slate-900 text-slate-800 dark:text-slate-100 font-sans transition-colors duration-300">

    <div id="sidebar-container" class="no-print"></div>
    
    <div class="main-content-wrapper md:mr-72 transition-all duration-300 flex flex-col min-h-screen">
        <div id="header-container" class="no-print"></div>

        <main class="p-6 space-y-6">
            
            <!-- 1. Committee Cards (Status Overview) -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <!-- Audit Committee (Active) -->
                <div class="bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-md border-r-4 rtl:border-r-4 ltr:border-l-4 ltr:border-r-0 border-brandBlue relative overflow-hidden group cursor-pointer hover:shadow-lg transition">
                    <div class="flex justify-between items-start mb-4">
                        <div class="w-12 h-12 bg-blue-50 dark:bg-blue-900/30 text-brandBlue rounded-xl flex items-center justify-center text-2xl group-hover:scale-110 transition-transform">
                            <i class="fa-solid fa-magnifying-glass-chart"></i>
                        </div>
                        <span class="bg-green-100 text-green-700 text-[10px] px-2 py-1 rounded-full font-bold flex items-center gap-1">
                            <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span> <span data-i18n="statusActive">Ù†Ø´Ø·Ø©</span>
                        </span>
                    </div>
                    <h3 class="font-bold text-lg mb-1" data-i18n="auditTitle">Ù„Ø¬Ù†Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</h3>
                    <p class="text-xs text-slate-500 mb-4" data-i18n="auditTerm">Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (2025-2028)</p>
                    
                    <!-- Members Preview -->
                    <div class="space-y-2 border-t border-slate-100 dark:border-slate-700 pt-3">
                        <div class="flex items-center gap-2 text-xs">
                            <div class="w-5 h-5 rounded-full bg-slate-200 flex items-center justify-center text-[10px]">M</div>
                            <span class="font-bold" data-i18n="auditChair">Ù…Ø­Ù…Ø¯ Ø¨Ù† Ù…Ù†ØµÙˆØ± Ø§Ù„Ø¹Ù†Ø²ÙŠ (Ø±Ø¦ÙŠØ³)</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs text-slate-500">
                            <span class="px-1" data-i18n="auditMembers">+2 Ø£Ø¹Ø¶Ø§Ø¡</span> | <span class="text-brandBlue font-bold" data-i18n="auditSec">Ø£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±: Ø£Ù†Øª</span>
                        </div>
                    </div>
                </div>

                <!-- Nomination Committee (Inactive) -->
                <div class="bg-slate-50 dark:bg-slate-800/50 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 committee-inactive relative">
                    <div class="absolute inset-0 z-10 flex items-center justify-center">
                        <span class="bg-slate-200 text-slate-600 px-3 py-1 rounded-lg text-xs font-bold shadow-sm transform -rotate-12" data-i18n="statusInactive">ØºÙŠØ± Ù…ÙØ¹Ù„Ø© / Ù„Ù… ØªØ´ÙƒÙ„</span>
                    </div>
                    <div class="flex justify-between items-start mb-4">
                        <div class="w-12 h-12 bg-slate-200 text-slate-500 rounded-xl flex items-center justify-center text-2xl">
                            <i class="fa-solid fa-users-gear"></i>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1 text-slate-500" data-i18n="nomTitle">Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª ÙˆØ§Ù„ØªØ±Ø´ÙŠØ­Ø§Øª</h3>
                    <p class="text-xs text-slate-400" data-i18n="nomDesc">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø±Ø§Ø± Ø§Ù„Ù…Ø¬Ù„Ø³</p>
                </div>

                <!-- Executive Committee (Inactive) -->
                <div class="bg-slate-50 dark:bg-slate-800/50 p-6 rounded-3xl border border-slate-200 dark:border-slate-700 committee-inactive relative">
                    <div class="absolute inset-0 z-10 flex items-center justify-center">
                        <span class="bg-slate-200 text-slate-600 px-3 py-1 rounded-lg text-xs font-bold shadow-sm transform -rotate-12" data-i18n="statusInactive">ØºÙŠØ± Ù…ÙØ¹Ù„Ø© / Ù„Ù… ØªØ´ÙƒÙ„</span>
                    </div>
                    <div class="flex justify-between items-start mb-4">
                        <div class="w-12 h-12 bg-slate-200 text-slate-500 rounded-xl flex items-center justify-center text-2xl">
                            <i class="fa-solid fa-rocket"></i>
                        </div>
                    </div>
                    <h3 class="font-bold text-lg mb-1 text-slate-500" data-i18n="execTitle">Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ©</h3>
                    <p class="text-xs text-slate-400" data-i18n="execDesc">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø±Ø§Ø± Ø§Ù„Ù…Ø¬Ù„Ø³</p>
                </div>

            </div>

            <!-- 2. Operations Area (Audit Committee Workspace) -->
            <div id="auditWorkspace" class="grid grid-cols-1 lg:grid-cols-3 gap-6 transition-all duration-500">
                
                <!-- Left: Meetings Management -->
                <div class="lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="font-bold text-slate-800 dark:text-white flex items-center gap-2">
                            <i class="fa-solid fa-briefcase text-brandBlue"></i> <span data-i18n="workTitle">Ø£Ø¹Ù…Ø§Ù„ Ù„Ø¬Ù†Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</span>
                        </h3>
                        <div class="flex gap-2">
                            <button onclick="startCommWizard()" class="px-4 py-2 bg-brandBlue text-white rounded-xl text-xs font-bold hover:bg-blue-700 shadow-md flex items-center gap-2 transition">
                                <i class="fa-solid fa-plus"></i> <span data-i18n="btnNewMtg">Ø§Ø¬ØªÙ…Ø§Ø¹ Ø¬Ø¯ÙŠØ¯</span>
                            </button>
                        </div>
                    </div>

                    <!-- Tabs -->
                    <div class="border-b border-slate-200 dark:border-slate-700 mb-4">
                        <nav class="flex gap-6">
                            <button class="pb-3 text-sm font-bold text-brandBlue border-b-2 border-brandBlue" data-i18n="tabCurrent">Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</button>
                            <button class="pb-3 text-sm font-bold text-slate-500 hover:text-slate-700 border-b-2 border-transparent" data-i18n="tabArchive">Ø§Ù„Ø£Ø±Ø´ÙŠÙ</button>
                        </nav>
                    </div>

                    <!-- Empty State -->
                    <div id="meetingsList" class="space-y-3">
                        <div class="text-center py-12 bg-slate-50 dark:bg-slate-700/30 rounded-xl border border-dashed border-slate-300 dark:border-slate-600">
                            <div class="w-14 h-14 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-400 text-xl">
                                <i class="fa-solid fa-calendar-check"></i>
                            </div>
                            <p class="text-sm text-slate-500 font-bold" data-i18n="emptyStateTitle">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ù…Ø¬Ø¯ÙˆÙ„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                            <p class="text-xs text-slate-400 mt-1" data-i18n="emptyStateDesc">Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø¬ØªÙ…Ø§Ø¹ Ù„Ù…Ù†Ø§Ù‚Ø´Ø© Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø£Ùˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±.</p>
                        </div>
                    </div>
                </div>

                <!-- Right: Financial Info & Secretary -->
                <div class="lg:col-span-1 space-y-6">
                    
                    <!-- Remuneration Info -->
                    <div class="bg-white dark:bg-slate-800 p-5 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700">
                        <h3 class="font-bold text-sm mb-4 flex items-center gap-2">
                            <i class="fa-solid fa-money-bill-wave text-green-500"></i> <span data-i18n="feesTitle">Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©</span>
                        </h3>
                        <div class="space-y-2 text-xs">
                            <div class="flex justify-between p-2 bg-slate-50 rounded border border-slate-100 dark:bg-slate-700 dark:border-slate-600">
                                <span data-i18n="feeMember">Ø¹Ø¶Ùˆ Ø§Ù„Ù„Ø¬Ù†Ø©</span>
                                <span class="font-bold font-en text-green-600">1,500 SAR</span>
                            </div>
                            <div class="flex justify-between p-2 bg-yellow-50 rounded border border-yellow-100 dark:bg-yellow-900/10 dark:border-yellow-900/30">
                                <span class="font-bold text-yellow-800 dark:text-yellow-500" data-i18n="feeSec">Ø£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±</span>
                                <span class="font-bold font-en text-green-600">1,000 SAR</span>
                            </div>
                        </div>
                        <div class="mt-3 text-[10px] text-slate-400" data-i18n="feeNote">
                            * ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ø¹ØªÙ…Ø§Ø¯ Ù…Ø­Ø¶Ø± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹.
                        </div>
                    </div>

                    <!-- Secretary Profile -->
                    <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-5 text-white shadow-lg">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center text-lg border-2 border-brandRed"><i class="fa-solid fa-feather"></i></div>
                            <div>
                                <p class="text-xs text-slate-400" data-i18n="secTitle">Ø£Ù…ÙŠÙ† Ø³Ø± Ø§Ù„Ù„Ø¬Ù†Ø©</p>
                                <p class="font-bold text-base" data-i18n="secName">Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-2 text-center text-[10px]">
                            <div class="bg-white/5 p-2 rounded">
                                <span class="block text-slate-400" data-i18n="statMtgs">Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª</span>
                                <span class="font-bold font-en text-lg">0</span>
                            </div>
                            <div class="bg-white/5 p-2 rounded">
                                <span class="block text-slate-400" data-i18n="statFees">Ù…Ø³ØªØ­Ù‚Ø§Øª</span>
                                <span class="font-bold font-en text-lg text-green-400">0</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </main>
    </div>

    <!-- COMMITTEE MEETING WIZARD -->
    <div id="commWizardModal" class="hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 w-full max-w-4xl rounded-2xl shadow-2xl flex flex-col max-h-[90vh]">
            
            <!-- Header -->
            <div class="p-5 border-b border-slate-200 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-900 rounded-t-2xl">
                <div>
                    <h3 class="font-bold text-lg flex items-center gap-2 text-slate-800 dark:text-white">
                        <i class="fa-solid fa-plus-circle text-brandBlue"></i> <span data-i18n="wizTitle">Ø§Ø¬ØªÙ…Ø§Ø¹ Ù„Ø¬Ù†Ø© Ø¬Ø¯ÙŠØ¯</span>
                    </h3>
                    <p class="text-xs text-slate-500 mt-1" id="comm-wizard-subtitle">Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØ§Ù„Ù…Ù„ÙØ§Øª</p>
                </div>
                <div class="flex items-center gap-4">
                    <!-- Progress Pills -->
                    <div class="flex gap-1 text-[10px] font-bold">
                        <span id="cw-step1" class="px-3 py-1 rounded-full bg-brandBlue text-white" data-i18n="wizS1">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯</span>
                        <span id="cw-step2" class="px-3 py-1 rounded-full bg-slate-100 text-slate-400" data-i18n="wizS2">Ø§Ù„Ø­Ø¶ÙˆØ±</span>
                        <span id="cw-step3" class="px-3 py-1 rounded-full bg-slate-100 text-slate-400" data-i18n="wizS3">Ø§Ù„Ù…Ø­Ø¶Ø±</span>
                        <span id="cw-step4" class="px-3 py-1 rounded-full bg-slate-100 text-slate-400" data-i18n="wizS4">Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯</span>
                    </div>
                    <button onclick="closeCommWizard()" class="text-slate-400 hover:text-red-500"><i class="fa-solid fa-xmark text-xl"></i></button>
                </div>
            </div>

            <!-- Body -->
            <div class="flex-1 p-6 overflow-y-auto">
                
                <!-- STEP 1: Setup & Files -->
                <div id="comm-step1" class="space-y-6">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="lblMtgNo">Ø±Ù‚Ù… Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹</label>
                            <input type="text" class="w-full border rounded p-2 text-sm bg-slate-50" value="AUD-01-2026" readonly>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="lblDate">Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
                            <input type="date" class="w-full border rounded p-2 text-sm">
                        </div>
                        <div class="col-span-2">
                            <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="lblTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹</label>
                            <input type="text" class="w-full border rounded p-2 text-sm" data-i18n-placeholder="plhTitle" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©">
                        </div>
                    </div>

                    <!-- Agenda & Files Builder -->
                    <div class="border border-slate-200 rounded-xl p-4">
                        <h4 class="font-bold text-sm mb-3 flex justify-between items-center">
                            <span data-i18n="lblAgendaFiles">Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù…Ù†Ø§Ù‚Ø´Ø© ÙˆØ§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙÙ‚Ø©</span>
                            <button onclick="addCommAgenda()" class="text-xs bg-green-50 text-green-600 px-3 py-1.5 rounded border border-green-200 font-bold hover:bg-green-100">
                                <i class="fa-solid fa-plus"></i> <span data-i18n="btnAddItem">Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯</span>
                            </button>
                        </h4>
                        <div id="commAgendaList" class="space-y-3">
                            <!-- Dynamic Items -->
                        </div>
                    </div>
                </div>

                <!-- STEP 2: Attendance -->
                <div id="comm-step2" class="hidden space-y-4">
                    <div class="bg-blue-50 p-3 rounded-lg border border-blue-100 flex justify-between items-center">
                        <span class="text-xs font-bold text-blue-800" data-i18n="wizAttTitle">Ø­Ø¶ÙˆØ± Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ÙˆØ£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±</span>
                        <span class="text-[10px] text-blue-600" data-i18n="wizAttNote">ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ø¨Ø¯Ù„Ø§Øª (1500 / 1000) Ù„Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† ÙÙ‚Ø·.</span>
                    </div>
                    <table class="w-full text-sm text-right rtl:text-right ltr:text-left border rounded-lg overflow-hidden">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="p-2" data-i18n="colName">Ø§Ù„Ø§Ø³Ù…</th>
                                <th class="p-2" data-i18n="colRole">Ø§Ù„Ù…Ù†ØµØ¨</th>
                                <th class="p-2" data-i18n="colFee">Ø§Ù„Ø¨Ø¯Ù„</th>
                                <th class="p-2 text-center" data-i18n="colPres">Ø­Ø§Ø¶Ø±</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y">
                            <tr><td data-i18n="mem1">Ù…Ø­Ù…Ø¯ Ø¨Ù† Ù…Ù†ØµÙˆØ± Ø§Ù„Ø¹Ù†Ø²ÙŠ</td><td class="text-xs text-slate-500" data-i18n="roleChair">Ø±Ø¦ÙŠØ³ Ø§Ù„Ù„Ø¬Ù†Ø©</td><td class="text-xs font-mono text-green-600">1,500</td><td class="text-center"><input type="checkbox" checked class="accent-brandBlue"></td></tr>
                            <tr><td data-i18n="mem2">Ø¹Ø§Ø¯Ù„ Ø¨Ù† Ø¹Ø¯Ù†Ø§Ù† Ø³Ø¹Ø³Ø¹</td><td class="text-xs text-slate-500" data-i18n="roleMem">Ø¹Ø¶Ùˆ</td><td class="text-xs font-mono text-green-600">1,500</td><td class="text-center"><input type="checkbox" checked class="accent-brandBlue"></td></tr>
                            <tr><td data-i18n="mem3">Ø£Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ</td><td class="text-xs text-slate-500" data-i18n="roleMem">Ø¹Ø¶Ùˆ</td><td class="text-xs font-mono text-green-600">1,500</td><td class="text-center"><input type="checkbox" checked class="accent-brandBlue"></td></tr>
                            <tr class="bg-yellow-50/50 font-bold text-slate-700"><td data-i18n="secName">Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ</td><td class="text-xs text-slate-500" data-i18n="roleSec">Ø£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±</td><td class="text-xs font-mono text-green-600">1,000</td><td class="text-center"><input type="checkbox" checked class="accent-slate-500" disabled></td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- STEP 3: Minutes Draft -->
                <div id="comm-step3" class="hidden space-y-4">
                    <label class="block text-xs font-bold text-slate-500" data-i18n="lblDraft">Ù…Ø³ÙˆØ¯Ø© Ø§Ù„Ù…Ø­Ø¶Ø±</label>
                    <textarea class="w-full border rounded-xl p-4 text-sm h-64 bg-slate-50 leading-relaxed" id="minutesText" data-i18n-placeholder="plhDraft"></textarea>
                </div>

                <!-- STEP 4: Approval & Signature -->
                <div id="comm-step4" class="hidden text-center py-10">
                    <div class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4">
                        <i class="fa-solid fa-file-signature"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2" data-i18n="readyTitle">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„</h3>
                    <p class="text-sm text-slate-500 mb-6" data-i18n="readyDesc">Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø­Ø¶Ø± Ù„Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø¹Ø¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.</p>
                    
                    <div class="flex justify-center gap-4">
                        <div class="bg-slate-50 p-3 rounded border text-xs text-left">
                            <p class="font-bold" data-i18n="attTitle">Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª:</p>
                            <ul class="list-disc list-inside text-slate-500" id="filesSummary">
                                <li data-i18n="noFiles">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Footer -->
            <div class="p-5 border-t border-slate-200 bg-slate-50 dark:bg-slate-900 rounded-b-2xl flex justify-between">
                <button onclick="cwPrev()" id="cw-prev" class="px-5 py-2 border rounded-xl text-xs font-bold bg-white text-slate-600 disabled:opacity-50" disabled data-i18n="prev">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <button onclick="cwNext()" id="cw-next" class="px-8 py-2 bg-brandBlue text-white rounded-xl text-xs font-bold hover:bg-blue-700" data-i18n="next">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>
        </div>
    </div>

    <!-- AndroBot Widget (AI Assistant) -->
    <div id="andro-bot-container" class="fixed bottom-6 left-6 z-50 flex flex-col items-start gap-4 font-sans" dir="rtl">
        <!-- Chat Window -->
        <div id="chat-window" class="hidden bg-white dark:bg-slate-800 w-80 md:w-96 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col chat-window-anim" style="height: 500px; max-height: 70vh;">
            <div class="bg-brandBlue p-4 flex justify-between items-center text-white">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center"><i class="fa-solid fa-robot"></i></div>
                    <div><h4 class="font-bold text-sm">AndroBot</h4><p class="text-[10px] text-white/80">Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø­ÙˆÙƒÙ…Ø© Ø§Ù„Ø°ÙƒÙŠ</p></div>
                </div>
                <button id="close-chat-btn" class="text-white/80 hover:text-white transition"><i class="fa-solid fa-times"></i></button>
            </div>
            <div id="chat-body" class="flex-1 p-4 bg-slate-50 dark:bg-slate-900/50 overflow-y-auto custom-scroll space-y-3 flex flex-col">
                <div class="chat-bubble bot">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„Ø¬Ø§Ù† ğŸ‘‹<br>ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ù…Ø¹Ø±ÙØ© Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù„Ø¬Ø§Ù†ØŒ ØªØ´ÙƒÙŠÙ„ Ù„Ø¬Ù†Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©ØŒ Ø£Ùˆ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª.</div>
                <div class="flex flex-wrap gap-2 mt-2" id="suggestions">
                    <button class="suggestion-btn text-xs bg-white border border-brandBlue/30 text-brandBlue px-3 py-1.5 rounded-full" data-q="Ù…Ù† Ù‡Ù… Ø£Ø¹Ø¶Ø§Ø¡ Ù„Ø¬Ù†Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©ØŸ">Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
                    <button class="suggestion-btn text-xs bg-white border border-brandBlue/30 text-brandBlue px-3 py-1.5 rounded-full" data-q="ÙƒÙ… Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ù„Ø¬Ù†Ø©ØŸ">Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ù„Ø¬Ù†Ø©</button>
                </div>
            </div>
            <div class="p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 flex gap-2">
                <input type="text" id="chat-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ..." class="flex-1 bg-slate-100 dark:bg-slate-900 border-none rounded-lg text-sm px-4 py-2 focus:ring-2 focus:ring-brandBlue outline-none dark:text-white">
                <button id="send-btn" class="w-10 h-10 rounded-lg bg-brandBlue text-white hover:bg-blue-700 transition flex items-center justify-center"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>
        <!-- Floating Button -->
        <button id="chat-fab" class="w-14 h-14 bg-brandBlue hover:bg-blue-700 text-white rounded-full shadow-lg shadow-blue-600/30 flex items-center justify-center text-2xl transition-all transform hover:scale-110 active:scale-95 animate-bounce-slow">
            <i class="fa-solid fa-comment-dots"></i>
            <span class="absolute top-0 right-0 w-4 h-4 bg-brandRed rounded-full border-2 border-white dark:border-slate-900"></span>
        </button>
    </div>

    <script src="layout.js"></script>
    <script src="bot.js"></script>

    <script>
        // --- Translation Dictionary ---
        const t = {
            ar: {
                pageTitle: "AndroGov | Ø§Ù„Ù„Ø¬Ø§Ù† Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©",
                statusActive: "Ù†Ø´Ø·Ø©",
                statusInactive: "ØºÙŠØ± Ù…ÙØ¹Ù„Ø© / Ù„Ù… ØªØ´ÙƒÙ„",
                auditTitle: "Ù„Ø¬Ù†Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",
                auditTerm: "Ø§Ù„Ø¯ÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (2025-2028)",
                auditChair: "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ù…Ù†ØµÙˆØ± Ø§Ù„Ø¹Ù†Ø²ÙŠ (Ø±Ø¦ÙŠØ³)",
                auditMembers: "+2 Ø£Ø¹Ø¶Ø§Ø¡",
                auditSec: "Ø£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±: Ø£Ù†Øª",
                nomTitle: "Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª ÙˆØ§Ù„ØªØ±Ø´ÙŠØ­Ø§Øª",
                nomDesc: "Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø±Ø§Ø± Ø§Ù„Ù…Ø¬Ù„Ø³",
                execTitle: "Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ©",
                execDesc: "Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ø±Ø§Ø± Ø§Ù„Ù…Ø¬Ù„Ø³",
                workTitle: "Ø£Ø¹Ù…Ø§Ù„ Ù„Ø¬Ù†Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",
                btnNewMtg: "Ø§Ø¬ØªÙ…Ø§Ø¹ Ø¬Ø¯ÙŠØ¯",
                tabCurrent: "Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©",
                tabArchive: "Ø§Ù„Ø£Ø±Ø´ÙŠÙ",
                emptyStateTitle: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ù…Ø¬Ø¯ÙˆÙ„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹",
                emptyStateDesc: "Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ø¬ØªÙ…Ø§Ø¹ Ù„Ù…Ù†Ø§Ù‚Ø´Ø© Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø£Ùˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±.",
                feesTitle: "Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©",
                feeMember: "Ø¹Ø¶Ùˆ Ø§Ù„Ù„Ø¬Ù†Ø©",
                feeSec: "Ø£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±",
                feeNote: "* ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ø¹ØªÙ…Ø§Ø¯ Ù…Ø­Ø¶Ø± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹.",
                secTitle: "Ø£Ù…ÙŠÙ† Ø³Ø± Ø§Ù„Ù„Ø¬Ù†Ø©",
                secName: "Ø£ÙŠÙ…Ù† Ø§Ù„Ù…ØºØ±Ø¨ÙŠ",
                statMtgs: "Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª",
                statFees: "Ù…Ø³ØªØ­Ù‚Ø§Øª",
                wizTitle: "Ø§Ø¬ØªÙ…Ø§Ø¹ Ù„Ø¬Ù†Ø© Ø¬Ø¯ÙŠØ¯",
                wizS1: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯",
                wizS2: "Ø§Ù„Ø­Ø¶ÙˆØ±",
                wizS3: "Ø§Ù„Ù…Ø­Ø¶Ø±",
                wizS4: "Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯",
                lblMtgNo: "Ø±Ù‚Ù… Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹",
                lblDate: "Ø§Ù„ØªØ§Ø±ÙŠØ®",
                lblTitle: "Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹",
                plhTitle: "Ù…Ø«Ø§Ù„: Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠØ©",
                lblAgendaFiles: "Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù…Ù†Ø§Ù‚Ø´Ø© ÙˆØ§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ÙÙ‚Ø©",
                btnAddItem: "Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¯",
                wizAttTitle: "Ø­Ø¶ÙˆØ± Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ÙˆØ£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±",
                wizAttNote: "ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ø¨Ø¯Ù„Ø§Øª (1500 / 1000) Ù„Ù„Ø­Ø§Ø¶Ø±ÙŠÙ† ÙÙ‚Ø·.",
                colName: "Ø§Ù„Ø§Ø³Ù…",
                colRole: "Ø§Ù„Ù…Ù†ØµØ¨",
                colFee: "Ø§Ù„Ø¨Ø¯Ù„",
                colPres: "Ø­Ø§Ø¶Ø±",
                mem1: "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ù…Ù†ØµÙˆØ± Ø§Ù„Ø¹Ù†Ø²ÙŠ",
                mem2: "Ø¹Ø§Ø¯Ù„ Ø¨Ù† Ø¹Ø¯Ù†Ø§Ù† Ø³Ø¹Ø³Ø¹",
                mem3: "Ø£Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ",
                roleChair: "Ø±Ø¦ÙŠØ³ Ø§Ù„Ù„Ø¬Ù†Ø©",
                roleMem: "Ø¹Ø¶Ùˆ",
                roleSec: "Ø£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±",
                lblDraft: "Ù…Ø³ÙˆØ¯Ø© Ø§Ù„Ù…Ø­Ø¶Ø±",
                plhDraft: "Ø§Ø¬ØªÙ…Ø¹ Ø£Ø¹Ø¶Ø§Ø¡ Ù„Ø¬Ù†Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙÙŠ ÙŠÙˆÙ…... ÙˆØªÙ… Ø§Ù„Ø§ØªÙØ§Ù‚ Ø¹Ù„Ù‰...",
                readyTitle: "Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„",
                readyDesc: "Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø­Ø¶Ø± Ù„Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø¹Ø¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØ§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.",
                attTitle: "Ø§Ù„Ù…Ø±ÙÙ‚Ø§Øª:",
                noFiles: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª",
                prev: "Ø§Ù„Ø³Ø§Ø¨Ù‚",
                next: "Ø§Ù„ØªØ§Ù„ÙŠ",
                send: "Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„ØªÙˆÙ‚ÙŠØ¹",
                itemPlh: "Ø§ÙƒØªØ¨ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ù†Ø¯ Ù‡Ù†Ø§...",
                attach: "Ø¥Ø±ÙØ§Ù‚ Ù…Ù„Ù (PDF)",
                noFileSel: "Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù",
                closeConfirm: "Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ØŸ Ù‚Ø¯ ØªÙÙ‚Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©.",
                successMsg: "ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ø­Ø¶Ø± Ù„Ù„ØªÙˆÙ‚ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­!"
            },
            en: {
                pageTitle: "AndroGov | Committees",
                statusActive: "Active",
                statusInactive: "Inactive / Not Formed",
                auditTitle: "Audit Committee",
                auditTerm: "Current Term (2025-2028)",
                auditChair: "Mohammed Al-Enezi (Chair)",
                auditMembers: "+2 Members",
                auditSec: "Secretary: You",
                nomTitle: "Nomination & Remuneration",
                nomDesc: "Pending Board Decision",
                execTitle: "Executive Committee",
                execDesc: "Pending Board Decision",
                workTitle: "Audit Committee Work",
                btnNewMtg: "New Meeting",
                tabCurrent: "Current Meetings",
                tabArchive: "Archive",
                emptyStateTitle: "No meetings scheduled",
                emptyStateDesc: "Start by creating a meeting to review financial statements.",
                feesTitle: "Financial Dues",
                feeMember: "Committee Member",
                feeSec: "Secretary",
                feeNote: "* Fees calculated automatically upon minutes approval.",
                secTitle: "Committee Secretary",
                secName: "Ayman Almaghrabi",
                statMtgs: "Meetings",
                statFees: "Dues",
                wizTitle: "New Committee Meeting",
                wizS1: "Setup",
                wizS2: "Attendance",
                wizS3: "Minutes",
                wizS4: "Approval",
                lblMtgNo: "Meeting No",
                lblDate: "Date",
                lblTitle: "Meeting Title",
                plhTitle: "Ex: Reviewing Quarterly Financials",
                lblAgendaFiles: "Agenda Items & Attachments",
                btnAddItem: "Add Item",
                wizAttTitle: "Attendance",
                wizAttNote: "Allowances (1500/1000) calculated for attendees only.",
                colName: "Name",
                colRole: "Role",
                colFee: "Fee",
                colPres: "Present",
                mem1: "Mohammed Al-Enezi",
                mem2: "Adel Sasa",
                mem3: "Ahmed Al-Suhaibani",
                roleChair: "Chairman",
                roleMem: "Member",
                roleSec: "Secretary",
                lblDraft: "Minutes Draft",
                plhDraft: "The Audit Committee met on... and agreed to...",
                readyTitle: "Ready to Send",
                readyDesc: "Minutes will be sent to members for review and e-signature.",
                attTitle: "Attachments:",
                noFiles: "No files",
                prev: "Previous",
                next: "Next",
                send: "Send for Signature",
                itemPlh: "Enter item title...",
                attach: "Attach PDF",
                noFileSel: "No file selected",
                closeConfirm: "Close wizard? Unsaved data will be lost.",
                successMsg: "Minutes sent for signature successfully!"
            }
        };

        // --- Logic ---
        let cwStep = 1;
        let agendaFiles = [];

        document.addEventListener('DOMContentLoaded', () => {
            updatePageLanguage();
        });

        window.updatePageLanguage = function() {
            const lang = localStorage.getItem('lang') || 'ar';
            const dict = t[lang];
            
            // Set Document Direction
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

            // Update Static Text
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(dict[key]) el.innerText = dict[key];
            });

            // Update Placeholders
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if(dict[key]) el.placeholder = dict[key];
            });
        }

        window.selectCommittee = function(type) {
            const lang = localStorage.getItem('lang') || 'ar';
            if(type === 'audit') {
                // Focus is already on audit workspace
                document.getElementById('auditWorkspace').scrollIntoView({behavior: 'smooth'});
            } else {
                alert(lang === 'ar' ? 'Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø¬Ù†Ø© ØºÙŠØ± Ù…ÙØ¹Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.' : 'This committee is currently inactive.');
            }
        }

        // --- Wizard Logic ---
        window.startCommWizard = function() {
            document.getElementById('commWizardModal').classList.remove('hidden');
            cwStep = 1;
            updateCwUI();
            // Add default agenda item if empty
            const list = document.getElementById('commAgendaList');
            if(list.children.length === 0) addCommAgenda(); 
        }

        window.closeCommWizard = function() {
            const lang = localStorage.getItem('lang') || 'ar';
            const dict = t[lang];
            if(confirm(dict.closeConfirm)) {
                document.getElementById('commWizardModal').classList.add('hidden');
            }
        }

        window.cwNext = function() {
            const lang = localStorage.getItem('lang') || 'ar';
            const dict = t[lang];
            if(cwStep < 4) {
                cwStep++;
                updateCwUI();
            } else {
                alert(dict.successMsg);
                document.getElementById('commWizardModal').classList.add('hidden');
            }
        }

        window.cwPrev = function() {
            if(cwStep > 1) {
                cwStep--;
                updateCwUI();
            }
        }

        window.updateCwUI = function() {
            const lang = localStorage.getItem('lang') || 'ar';
            const dict = t[lang];

            // Toggle Steps
            for(let i=1; i<=4; i++) document.getElementById(`comm-step${i}`).classList.add('hidden');
            document.getElementById(`comm-step${cwStep}`).classList.remove('hidden');

            // Update Header
            const titles = ["", dict.wizS1, dict.wizS2, dict.wizS3, dict.wizS4];
            document.getElementById('comm-wizard-subtitle').innerText = `${lang==='ar'?'Ø§Ù„Ø®Ø·ÙˆØ©':'Step'} ${cwStep}: ${titles[cwStep]}`;

            // Update Pills
            for(let i=1; i<=4; i++) {
                const pill = document.getElementById(`cw-step${i}`);
                pill.className = i === cwStep ? "px-3 py-1 rounded-full bg-brandBlue text-white" : (i < cwStep ? "px-3 py-1 rounded-full bg-green-100 text-green-600" : "px-3 py-1 rounded-full bg-slate-100 text-slate-400");
            }

            // Buttons
            document.getElementById('cw-prev').disabled = cwStep === 1;
            document.getElementById('cw-next').innerText = cwStep === 4 ? dict.send : dict.next;
        }

        // --- Agenda & Files Logic ---
        window.addCommAgenda = function() {
            const list = document.getElementById('commAgendaList');
            const id = Date.now();
            const lang = localStorage.getItem('lang') || 'ar';
            const dict = t[lang];
            
            const div = document.createElement('div');
            div.className = "p-3 border border-slate-200 rounded-xl bg-slate-50 space-y-2";
            div.innerHTML = `
                <input type="text" class="w-full bg-transparent font-bold text-sm outline-none border-b border-dashed border-slate-300 pb-1" placeholder="${dict.itemPlh}">
                <div class="flex items-center gap-2">
                    <label for="file-${id}" class="cursor-pointer text-[10px] bg-white border px-2 py-1 rounded hover:bg-slate-100 flex items-center gap-1 text-slate-600">
                        <i class="fa-solid fa-paperclip"></i> ${dict.attach}
                    </label>
                    <input type="file" id="file-${id}" class="hidden" onchange="fileUploaded(this)">
                    <span class="text-[10px] text-slate-400" id="filename-${id}">${dict.noFileSel}</span>
                </div>
            `;
            list.appendChild(div);
        }

        window.fileUploaded = function(input) {
            if(input.files && input.files[0]) {
                const span = document.getElementById(`filename-${input.id.split('-')[1]}`);
                span.innerText = input.files[0].name;
                span.classList.add('text-green-600', 'font-bold');
                span.classList.remove('text-slate-400');
                
                // Add to summary
                const summary = document.getElementById('filesSummary');
                const lang = localStorage.getItem('lang') || 'ar';
                if(summary.innerText.includes(t[lang].noFiles)) summary.innerHTML = '';
                summary.innerHTML += `<li>${input.files[0].name}</li>`;
            }
        }

        // --- Override Chatbot Response for Committees Context ---
        // We inject a custom AI response handler specifically for this page context
        const originalGetAIResponse = window.getAIResponse; // Save original if exists
        
        window.getAIResponse = function(query, isArabic) {
            const q = query.toLowerCase();
            
            // Context: Audit Committee Members
            if (q.includes('members') || q.includes('audit') || q.includes('Ø£Ø¹Ø¶Ø§Ø¡') || q.includes('Ù…Ø±Ø§Ø¬Ø¹Ø©')) {
                return isArabic 
                    ? `ØªØªÙƒÙˆÙ† Ù„Ø¬Ù†Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ù†:<br>1. <b>Ù…Ø­Ù…Ø¯ Ø¨Ù† Ù…Ù†ØµÙˆØ± Ø§Ù„Ø¹Ù†Ø²ÙŠ</b> (Ø±Ø¦ÙŠØ³)<br>2. <b>Ø¹Ø§Ø¯Ù„ Ø¨Ù† Ø¹Ø¯Ù†Ø§Ù† Ø³Ø¹Ø³Ø¹</b> (Ø¹Ø¶Ùˆ)<br>3. <b>Ø£Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ</b> (Ø¹Ø¶Ùˆ)`
                    : `The Audit Committee consists of:<br>1. <b>Mohammed Al-Enezi</b> (Chair)<br>2. <b>Adel Sasa</b> (Member)<br>3. <b>Ahmed Al-Suhaibani</b> (Member)`;
            }

            // Context: Remuneration
            if (q.includes('fee') || q.includes('reward') || q.includes('Ù…ÙƒØ§ÙØ£Ø©') || q.includes('Ø¨Ø¯Ù„')) {
                return isArabic
                    ? `Ù…ÙƒØ§ÙØ£Ø© Ø­Ø¶ÙˆØ± Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ø§Ù„Ù„Ø¬Ø§Ù† Ù‡ÙŠ <b>1,500 Ø±ÙŠØ§Ù„</b> Ù„Ù„Ø¹Ø¶ÙˆØŒ Ùˆ <b>1,000 Ø±ÙŠØ§Ù„</b> Ù„Ø£Ù…ÙŠÙ† Ø§Ù„Ø³Ø±ØŒ Ø¹Ù† ÙƒÙ„ Ø§Ø¬ØªÙ…Ø§Ø¹.`
                    : `Committee meeting fees are <b>1,500 SAR</b> per member, and <b>1,000 SAR</b> for the secretary per meeting.`;
            }

            // Fallback to general logic (if bot.js exposes it, otherwise simple fallback)
            return isArabic
                ? `Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ø£ÙÙ‡Ù…. ÙŠÙ…ÙƒÙ†Ùƒ Ø³Ø¤Ø§Ù„ÙŠ Ø¹Ù†: <b>Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù„Ø¬Ù†Ø©</b> Ø£Ùˆ <b>Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹</b>.`
                : `Sorry, I didn't catch that. Ask me about: <b>Committee Members</b> or <b>Meeting Fees</b>.`;
        }

    </script>
</body>
</html>
