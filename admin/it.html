<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pageTitle">AndroGov | Ø§Ù„ØªÙ‚Ù†ÙŠØ© ÙˆØ§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</title>
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brandRed: '#FB4747',
                        brandBlue: '#4267B2',
                        brandDark: '#1E293B',
                        brandGray: '#F8FAFC'
                    },
                    fontFamily: {
                        sans: ['Tajawal', 'Inter', 'sans-serif'],
                        en: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background: white; }
        }
        
        body { transition: opacity 0.2s ease-in-out; }

        /* Bot Styles */
        .chat-window-anim { transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1); transform-origin: bottom left; }
        .chat-bubble { max-width: 85%; padding: 10px 14px; border-radius: 12px; font-size: 0.9rem; line-height: 1.5; word-wrap: break-word; }
        .chat-bubble.bot { background-color: #f1f5f9; color: #334155; border-bottom-right-radius: 2px; }
        .dark .chat-bubble.bot { background-color: #334155; color: #f8fafc; }
        .chat-bubble.user { background-color: #4267B2; color: white; border-bottom-left-radius: 2px; margin-right: auto; }
        .typing-indicator span { display: inline-block; width: 6px; height: 6px; background-color: #94a3b8; border-radius: 50%; animation: typing 1.4s infinite ease-in-out both; margin: 0 1px; }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
    </style>
</head>
<body class="bg-brandGray dark:bg-slate-900 text-slate-800 dark:text-slate-100 font-sans transition-colors duration-300">

    <div id="sidebar-container" class="no-print"></div>
    
    <div class="main-content-wrapper md:mr-72 transition-all duration-300 flex flex-col min-h-screen">
        <div id="header-container" class="no-print"></div>

        <main class="p-6 space-y-6">
            
            <!-- 1. IT Dashboard Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 no-print">
                <div class="bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-center justify-between">
                    <div>
                        <p class="text-xs text-slate-500 dark:text-slate-400 font-bold uppercase" data-i18n="kpiTickets">ØªØ°Ø§ÙƒØ± Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…ÙØªÙˆØ­Ø©</p>
                        <h3 class="text-2xl font-bold mt-1 font-en dark:text-white">12</h3>
                    </div>
                    <div class="w-10 h-10 bg-blue-50 dark:bg-blue-900/30 text-brandBlue rounded-xl flex items-center justify-center text-xl"><i class="fa-solid fa-headset"></i></div>
                </div>
                <div class="bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-center justify-between">
                    <div>
                        <p class="text-xs text-slate-500 dark:text-slate-400 font-bold uppercase" data-i18n="kpiAssets">Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©</p>
                        <h3 class="text-2xl font-bold mt-1 font-en text-purple-600">145</h3>
                    </div>
                    <div class="w-10 h-10 bg-purple-50 dark:bg-purple-900/30 text-purple-600 rounded-xl flex items-center justify-center text-xl"><i class="fa-solid fa-laptop"></i></div>
                </div>
                <div class="bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-center justify-between">
                    <div>
                        <p class="text-xs text-slate-500 dark:text-slate-400 font-bold uppercase" data-i18n="kpiCyber">Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ù…Ù†ÙŠØ©</p>
                        <h3 class="text-xl font-bold mt-1 text-green-500" data-i18n="statSecure">Ø¢Ù…Ù†Ø© (98%)</h3>
                    </div>
                    <div class="w-10 h-10 bg-green-50 dark:bg-green-900/30 text-green-500 rounded-xl flex items-center justify-center text-xl"><i class="fa-solid fa-shield-halved"></i></div>
                </div>
                <div class="bg-white dark:bg-slate-800 p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-center justify-between">
                    <div>
                        <p class="text-xs text-slate-500 dark:text-slate-400 font-bold uppercase" data-i18n="kpiAlerts">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø£Ù…Ù†ÙŠØ©</p>
                        <h3 class="text-2xl font-bold mt-1 font-en text-red-500">2</h3>
                    </div>
                    <div class="w-10 h-10 bg-red-50 dark:bg-red-900/30 text-red-500 rounded-xl flex items-center justify-center text-xl"><i class="fa-solid fa-bell"></i></div>
                </div>
            </div>

            <!-- 2. Main Workspace -->
            <div class="bg-white dark:bg-slate-800 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 min-h-[600px] flex flex-col">
                
                <!-- Toolbar -->
                <div class="p-6 border-b border-slate-100 dark:border-slate-700 flex flex-col md:flex-row justify-between items-center gap-4">
                    <div class="flex bg-slate-100 dark:bg-slate-700 p-1 rounded-xl w-full md:w-auto overflow-x-auto">
                        <button onclick="switchTab('tickets')" id="btn-tickets" class="px-5 py-2 text-xs font-bold rounded-lg bg-white text-brandBlue shadow-sm transition-all tab-btn" data-i18n="tabTickets">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</button>
                        <button onclick="switchTab('assets')" id="btn-assets" class="px-5 py-2 text-xs font-bold rounded-lg text-slate-500 hover:text-slate-700 transition-all tab-btn" data-i18n="tabAssets">Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø¹Ù‡Ø¯</button>
                        <button onclick="switchTab('access')" id="btn-access" class="px-5 py-2 text-xs font-bold rounded-lg text-slate-500 hover:text-slate-700 transition-all tab-btn" data-i18n="tabAccess">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØµÙˆÙ„</button>
                        <button onclick="switchTab('cyber')" id="btn-cyber" class="px-5 py-2 text-xs font-bold rounded-lg text-slate-500 hover:text-slate-700 transition-all tab-btn" data-i18n="tabCyber">Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</button>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="openTicketModal()" class="px-4 py-2 bg-brandBlue text-white rounded-xl text-xs font-bold hover:bg-blue-700 transition flex items-center gap-2 shadow-lg">
                            <i class="fa-solid fa-plus"></i> <span data-i18n="btnTicket">ØªØ°ÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</span>
                        </button>
                    </div>
                </div>

                <!-- Tab 1: Support Tickets -->
                <div id="tab-tickets" class="tab-content block p-6">
                    <div class="flex justify-between mb-4">
                        <div class="relative w-64">
                            <input type="text" id="ticketSearch" onkeyup="filterTickets()" placeholder="..." class="w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 dark:border-slate-600 dark:bg-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-brandBlue outline-none dark:text-white" data-i18n-placeholder="plhSearch">
                            <i class="fa-solid fa-search absolute left-3 top-2.5 text-slate-400 rtl:left-3 ltr:right-3"></i>
                        </div>
                        <select class="bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-1.5 text-xs focus:outline-none dark:text-white">
                            <option data-i18n="filterAll">Ø§Ù„ÙƒÙ„</option>
                            <option data-i18n="filterOpen">Ù…ÙØªÙˆØ­Ø©</option>
                            <option data-i18n="filterClosed">Ù…ØºÙ„Ù‚Ø©</option>
                        </select>
                    </div>
                    
                    <div class="overflow-x-auto border border-slate-200 dark:border-slate-600 rounded-xl">
                        <table class="w-full text-sm text-right rtl:text-right ltr:text-left">
                            <thead class="bg-slate-50 dark:bg-slate-700 text-xs font-bold text-slate-500 uppercase">
                                <tr>
                                    <th class="p-4" data-i18n="colID">Ø±Ù‚Ù… Ø§Ù„ØªØ°ÙƒØ±Ø©</th>
                                    <th class="p-4" data-i18n="colSubj">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</th>
                                    <th class="p-4" data-i18n="colReq">Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                                    <th class="p-4" data-i18n="colDate">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                    <th class="p-4" data-i18n="colPrio">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</th>
                                    <th class="p-4 text-center" data-i18n="colStat">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                                    <th class="p-4 text-center" data-i18n="colAction">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-slate-100 dark:divide-slate-700" id="ticketsTable">
                                <!-- JS Populated -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Tab 2: IT Assets -->
                <div id="tab-assets" class="tab-content hidden p-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                         <!-- Asset Card 1 -->
                         <div class="p-4 border dark:border-slate-700 rounded-xl hover:border-brandBlue transition group cursor-pointer bg-white dark:bg-slate-700/30">
                            <div class="flex justify-between items-start mb-2">
                                <div class="p-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 rounded-lg"><i class="fa-solid fa-laptop"></i></div>
                                <span class="text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded" data-i18n="astCustody">Ø¹Ù‡Ø¯Ø©</span>
                            </div>
                            <h5 class="font-bold text-sm dark:text-white" data-i18n="ast1Name">MacBook Pro M3</h5>
                            <p class="text-xs text-slate-500 mt-1">S/N: XYZ123</p>
                            <p class="text-[10px] text-slate-400 mt-2"><span data-i18n="astEmp">Ø§Ù„Ù…ÙˆØ¸Ù:</span> <span data-i18n="empName">Ù‡Ø´Ø§Ù… Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ</span></p>
                        </div>
                        
                        <!-- Asset Card 2 -->
                        <div class="p-4 border dark:border-slate-700 rounded-xl hover:border-brandBlue transition group cursor-pointer bg-white dark:bg-slate-700/30">
                            <div class="flex justify-between items-start mb-2">
                                <div class="p-2 bg-purple-50 dark:bg-purple-900/30 text-purple-600 rounded-lg"><i class="fa-solid fa-server"></i></div>
                                <span class="text-[10px] bg-blue-100 text-blue-700 px-2 py-0.5 rounded" data-i18n="astInfra">Ø¨Ù†ÙŠØ© ØªØ­ØªÙŠØ©</span>
                            </div>
                            <h5 class="font-bold text-sm dark:text-white" data-i18n="ast2Name">Dell PowerEdge R750</h5>
                            <p class="text-xs text-slate-500 mt-1">IP: 192.168.1.10</p>
                            <p class="text-[10px] text-slate-400 mt-2" data-i18n="astLoc">Ø§Ù„Ù…ÙˆÙ‚Ø¹: ØºØ±ÙØ© Ø§Ù„Ø®ÙˆØ§Ø¯Ù…</p>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: Access Management -->
                <div id="tab-access" class="tab-content hidden p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="border dark:border-slate-700 rounded-2xl p-4">
                            <h4 class="font-bold text-sm mb-4 dark:text-white" data-i18n="accReqs">Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h4>
                            <div class="space-y-3">
                                <div class="p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center">
                                    <div>
                                        <p class="text-xs font-bold dark:text-white" data-i18n="req1Name">ÙˆØ¹Ø¯ Ø¹ØµÙ…Øª</p>
                                        <p class="text-[10px] text-slate-500" data-i18n="req1Desc">Ø·Ù„Ø¨ ÙˆØµÙˆÙ„ Ù„Ù…Ù„ÙØ§Øª HR</p>
                                    </div>
                                    <div class="flex gap-2">
                                        <button class="text-green-600 hover:bg-green-50 p-1 rounded"><i class="fa-solid fa-check"></i></button>
                                        <button class="text-red-600 hover:bg-red-50 p-1 rounded"><i class="fa-solid fa-xmark"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 4: Cybersecurity -->
                <div id="tab-cyber" class="tab-content hidden p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="border border-red-200 bg-red-50 dark:bg-red-900/10 rounded-2xl p-4">
                            <h4 class="font-bold text-sm mb-4 text-red-700 dark:text-red-300" data-i18n="cybAlerts">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ù…Ù†ÙŠØ© Ø§Ù„Ù†Ø´Ø·Ø©</h4>
                            <div class="space-y-3">
                                <div class="flex items-start gap-2">
                                    <i class="fa-solid fa-triangle-exclamation text-red-500 mt-1"></i>
                                    <div>
                                        <p class="text-xs font-bold text-slate-700 dark:text-white" data-i18n="alrt1">Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¯Ø®ÙˆÙ„ Ù…Ø´Ø¨ÙˆÙ‡Ø© (IP Ø®Ø§Ø±Ø¬ÙŠ)</p>
                                        <p class="text-[10px] text-slate-500">Ù‚Ø¨Ù„ 10 Ø¯Ù‚Ø§Ø¦Ù‚</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-2">
                                    <i class="fa-solid fa-triangle-exclamation text-orange-500 mt-1"></i>
                                    <div>
                                        <p class="text-xs font-bold text-slate-700 dark:text-white" data-i18n="alrt2">Ø¨Ø±Ø§Ù…Ø¬ ØºÙŠØ± Ù…ØµØ±Ø­Ø© Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…ÙˆØ¸Ù (ID: 2005)</p>
                                        <p class="text-[10px] text-slate-500">Ø§Ù„ÙŠÙˆÙ… 09:00 AM</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="border dark:border-slate-700 rounded-2xl p-4">
                            <h4 class="font-bold text-sm mb-4 dark:text-white" data-i18n="cybPol">Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</h4>
                            <ul class="text-xs space-y-2 text-slate-600 dark:text-slate-300 list-disc list-inside">
                                <li data-i18n="pol1">Ø³ÙŠØ§Ø³Ø© ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± (ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 90 ÙŠÙˆÙ…)</li>
                                <li data-i18n="pol2">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„</li>
                                <li data-i18n="pol3">Ø®Ø·Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø­ÙˆØ§Ø¯Ø«</li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>

        </main>
    </div>

    <!-- Ticket Modal -->
    <div id="ticketModal" class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 w-full max-w-lg rounded-2xl shadow-xl p-6">
            <div class="flex justify-between items-center mb-4 border-b pb-2 dark:border-slate-700">
                <h3 class="font-bold text-lg dark:text-white" data-i18n="modTickTitle">Ø¥Ù†Ø´Ø§Ø¡ ØªØ°ÙƒØ±Ø© Ø¯Ø¹Ù… Ø¬Ø¯ÙŠØ¯Ø©</h3>
                <button onclick="document.getElementById('ticketModal').classList.add('hidden')"><i class="fa-solid fa-xmark text-slate-400"></i></button>
            </div>
            
            <form class="space-y-4">
                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="modSubj">Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</label>
                    <input type="text" class="w-full border dark:border-slate-600 bg-white dark:bg-slate-700 rounded-lg p-2 text-sm outline-none focus:ring-2 focus:ring-brandBlue" data-i18n-placeholder="plhSubj" placeholder="...">
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="modCat">Ø§Ù„ÙØ¦Ø©</label>
                        <select class="w-full border dark:border-slate-600 bg-white dark:bg-slate-700 rounded-lg p-2 text-sm dark:text-white">
                            <option data-i18n="catHw">Ø£Ø¬Ù‡Ø²Ø© (Hardware)</option>
                            <option data-i18n="catSw">Ø¨Ø±Ø§Ù…Ø¬ (Software)</option>
                            <option data-i18n="catNet">Ø´Ø¨ÙƒØ© (Network)</option>
                            <option data-i18n="catAcc">Ø­Ø³Ø§Ø¨Ø§Øª (Access)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="modPrio">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</label>
                        <select class="w-full border dark:border-slate-600 bg-white dark:bg-slate-700 rounded-lg p-2 text-sm dark:text-white">
                            <option data-i18n="prioLow">Ù…Ù†Ø®ÙØ¶Ø©</option>
                            <option data-i18n="prioMed">Ù…ØªÙˆØ³Ø·Ø©</option>
                            <option data-i18n="prioHigh">Ø¹Ø§Ù„ÙŠØ©</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="modDesc">Ø§Ù„ÙˆØµÙ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</label>
                    <textarea class="w-full border dark:border-slate-600 bg-white dark:bg-slate-700 rounded-lg p-2 text-sm h-20" placeholder="..."></textarea>
                </div>
            </form>

            <div class="mt-6 flex justify-end gap-3">
                <button onclick="document.getElementById('ticketModal').classList.add('hidden')" class="px-4 py-2 border rounded-lg text-xs font-bold bg-white text-slate-600" data-i18n="cancel">Ø¥Ù„ØºØ§Ø¡</button>
                <button onclick="alert('Ticket Created'); document.getElementById('ticketModal').classList.add('hidden')" class="px-6 py-2 bg-brandBlue text-white rounded-lg text-xs font-bold hover:bg-blue-700" data-i18n="btnSave">Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <!-- AndroBot Widget (AI Assistant) -->
    <div id="andro-bot-container" class="fixed bottom-6 left-6 z-50 flex flex-col items-start gap-4 font-sans" dir="rtl">
        <!-- Chat Window -->
        <div id="chat-window" class="hidden bg-white dark:bg-slate-800 w-80 md:w-96 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden flex flex-col chat-window-anim" style="height: 500px; max-height: 70vh;">
            <div class="bg-brandBlue p-4 flex justify-between items-center text-white">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center"><i class="fa-solid fa-robot"></i></div>
                    <div><h4 class="font-bold text-sm">AndroBot</h4><p class="text-[10px] text-white/80">Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø­ÙˆÙƒÙ…Ø© Ø§Ù„Ø°ÙƒÙŠ</p></div>
                </div>
                <button id="close-chat-btn" class="text-white/80 hover:text-white transition"><i class="fa-solid fa-times"></i></button>
            </div>
            <div id="chat-body" class="flex-1 p-4 bg-slate-50 dark:bg-slate-900/50 overflow-y-auto custom-scroll space-y-3 flex flex-col">
                <div class="chat-bubble bot">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„ØªÙ‚Ù†ÙŠØ© ğŸ‘‹<br>Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ ØªØªØ¨Ø¹ Ø§Ù„ØªØ°Ø§ÙƒØ±ØŒ Ø§Ù„Ø£ØµÙˆÙ„ØŒ Ø£Ùˆ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ù…Ù†ÙŠØ©.</div>
                <div class="flex flex-wrap gap-2 mt-2" id="suggestions">
                    <button class="suggestion-btn text-xs bg-white border border-brandBlue/30 text-brandBlue px-3 py-1.5 rounded-full" data-q="Ø§Ù„ØªØ°Ø§ÙƒØ± Ø§Ù„Ù…ÙØªÙˆØ­Ø©">Ø§Ù„ØªØ°Ø§ÙƒØ± Ø§Ù„Ù…ÙØªÙˆØ­Ø©</button>
                    <button class="suggestion-btn text-xs bg-white border border-brandBlue/30 text-brandBlue px-3 py-1.5 rounded-full" data-q="ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø£Ù…Ù†ÙŠØ©">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø£Ù…Ù†ÙŠØ©</button>
                </div>
            </div>
            <div class="p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 flex gap-2">
                <input type="text" id="chat-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ..." class="flex-1 bg-slate-100 dark:bg-slate-900 border-none rounded-lg text-sm px-4 py-2 focus:ring-2 focus:ring-brandBlue outline-none dark:text-white">
                <button id="send-btn" class="w-10 h-10 rounded-lg bg-brandBlue text-white hover:bg-blue-700 transition flex items-center justify-center"><i class="fa-solid fa-paper-plane"></i></button>
            </div>
        </div>
        <!-- Floating Button -->
        <button id="chat-fab" class="w-14 h-14 bg-brandBlue hover:bg-blue-700 text-white rounded-full shadow-lg shadow-blue-600/30 flex items-center justify-center text-2xl transition-all transform hover:scale-110 active:scale-95 animate-bounce-slow">
            <i class="fa-solid fa-comment-dots"></i>
            <span class="absolute top-0 right-0 w-4 h-4 bg-brandRed rounded-full border-2 border-white dark:border-slate-900"></span>
        </button>
    </div>

    <script src="layout.js"></script>
    <script src="bot.js"></script>

    <script>
        // --- Translation Dictionary ---
        const t = {
            ar: {
                pageTitle: "AndroGov | Ø§Ù„ØªÙ‚Ù†ÙŠØ© ÙˆØ§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ",
                kpiTickets: "ØªØ°Ø§ÙƒØ± Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„Ù…ÙØªÙˆØ­Ø©",
                kpiAssets: "Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©",
                kpiCyber: "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ù…Ù†ÙŠØ©",
                kpiAlerts: "ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø£Ù…Ù†ÙŠØ©",
                statSecure: "Ø¢Ù…Ù†Ø© (98%)",
                tabTickets: "Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ",
                tabAssets: "Ø§Ù„Ø£ØµÙˆÙ„ ÙˆØ§Ù„Ø¹Ù‡Ø¯",
                tabAccess: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØµÙˆÙ„",
                tabCyber: "Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ",
                btnTicket: "ØªØ°ÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©",
                plhSearch: "Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„ØªØ°ÙƒØ±Ø©...",
                filterAll: "Ø§Ù„ÙƒÙ„",
                filterOpen: "Ù…ÙØªÙˆØ­Ø©",
                filterClosed: "Ù…ØºÙ„Ù‚Ø©",
                colID: "Ø±Ù‚Ù… Ø§Ù„ØªØ°ÙƒØ±Ø©",
                colSubj: "Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹",
                colReq: "Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨",
                colDate: "Ø§Ù„ØªØ§Ø±ÙŠØ®",
                colPrio: "Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©",
                colStat: "Ø§Ù„Ø­Ø§Ù„Ø©",
                colAction: "Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",
                statOpen: "Ù…ÙØªÙˆØ­Ø©",
                statClosed: "Ù…ØºÙ„Ù‚Ø©",
                prioHigh: "Ø¹Ø§Ù„ÙŠØ©",
                prioMed: "Ù…ØªÙˆØ³Ø·Ø©",
                prioLow: "Ù…Ù†Ø®ÙØ¶Ø©",
                astCustody: "Ø¹Ù‡Ø¯Ø©",
                ast1Name: "MacBook Pro M3",
                astEmp: "Ø§Ù„Ù…ÙˆØ¸Ù:",
                empName: "Ù‡Ø´Ø§Ù… Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ",
                astInfra: "Ø¨Ù†ÙŠØ© ØªØ­ØªÙŠØ©",
                ast2Name: "Dell PowerEdge R750",
                astLoc: "Ø§Ù„Ù…ÙˆÙ‚Ø¹: ØºØ±ÙØ© Ø§Ù„Ø®ÙˆØ§Ø¯Ù…",
                accReqs: "Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©",
                req1Name: "ÙˆØ¹Ø¯ Ø¹ØµÙ…Øª",
                req1Desc: "Ø·Ù„Ø¨ ÙˆØµÙˆÙ„ Ù„Ù…Ù„ÙØ§Øª HR",
                cybAlerts: "Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø£Ù…Ù†ÙŠØ© Ø§Ù„Ù†Ø´Ø·Ø©",
                alrt1: "Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¯Ø®ÙˆÙ„ Ù…Ø´Ø¨ÙˆÙ‡Ø© (IP Ø®Ø§Ø±Ø¬ÙŠ)",
                alrt2: "Ø¨Ø±Ø§Ù…Ø¬ ØºÙŠØ± Ù…ØµØ±Ø­Ø© Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…ÙˆØ¸Ù (ID: 2005)",
                cybPol: "Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ",
                pol1: "Ø³ÙŠØ§Ø³Ø© ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± (ØªØ­Ø¯ÙŠØ« ÙƒÙ„ 90 ÙŠÙˆÙ…)",
                pol2: "Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„",
                pol3: "Ø®Ø·Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø­ÙˆØ§Ø¯Ø«",
                modTickTitle: "Ø¥Ù†Ø´Ø§Ø¡ ØªØ°ÙƒØ±Ø© Ø¯Ø¹Ù… Ø¬Ø¯ÙŠØ¯Ø©",
                modSubj: "Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹",
                plhSubj: "Ù…Ø´ÙƒÙ„Ø© ÙÙŠ...",
                modCat: "Ø§Ù„ÙØ¦Ø©",
                catHw: "Ø£Ø¬Ù‡Ø²Ø© (Hardware)",
                catSw: "Ø¨Ø±Ø§Ù…Ø¬ (Software)",
                catNet: "Ø´Ø¨ÙƒØ© (Network)",
                catAcc: "Ø­Ø³Ø§Ø¨Ø§Øª (Access)",
                modPrio: "Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©",
                modDesc: "Ø§Ù„ÙˆØµÙ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ",
                cancel: "Ø¥Ù„ØºØ§Ø¡",
                btnSave: "Ø¥Ø±Ø³Ø§Ù„",
                // Data
                tick1Subj: "Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ±",
                tick2Subj: "Ø·Ù„Ø¨ ØªØ«Ø¨ÙŠØª Office 365"
            },
            en: {
                pageTitle: "AndroGov | IT & Cybersecurity",
                kpiTickets: "Open Tickets",
                kpiAssets: "IT Assets",
                kpiCyber: "Security Status",
                kpiAlerts: "Security Alerts",
                statSecure: "Secure (98%)",
                tabTickets: "Help Desk",
                tabAssets: "Assets & Custody",
                tabAccess: "Access Management",
                tabCyber: "Cybersecurity",
                btnTicket: "New Ticket",
                plhSearch: "Search Ticket No...",
                filterAll: "All",
                filterOpen: "Open",
                filterClosed: "Closed",
                colID: "Ticket ID",
                colSubj: "Subject",
                colReq: "Requester",
                colDate: "Date",
                colPrio: "Priority",
                colStat: "Status",
                colAction: "Actions",
                statOpen: "Open",
                statClosed: "Closed",
                prioHigh: "High",
                prioMed: "Medium",
                prioLow: "Low",
                astCustody: "Custody",
                ast1Name: "MacBook Pro M3",
                astEmp: "Employee:",
                empName: "Hesham Al-Suhaibani",
                astInfra: "Infrastructure",
                ast2Name: "Dell PowerEdge R750",
                astLoc: "Loc: Server Room",
                accReqs: "Pending Access Requests",
                req1Name: "Waad Esmat",
                req1Desc: "Request Access to HR Files",
                cybAlerts: "Active Security Alerts",
                alrt1: "Suspicious Login Attempts (External IP)",
                alrt2: "Unauthorized Software on User Device (ID: 2005)",
                cybPol: "Cybersecurity Policies",
                pol1: "Password Policy (90-day rotation)",
                pol2: "Acceptable Use Policy",
                pol3: "Incident Response Plan",
                modTickTitle: "Create New Support Ticket",
                modSubj: "Subject",
                plhSubj: "Issue with...",
                modCat: "Category",
                catHw: "Hardware",
                catSw: "Software",
                catNet: "Network",
                catAcc: "Access",
                modPrio: "Priority",
                modDesc: "Detailed Description",
                cancel: "Cancel",
                btnSave: "Submit",
                // Data
                tick1Subj: "Login issue with Attendance System",
                tick2Subj: "Install Office 365 Request"
            }
        };

        // Mock Data
        const tickets = [
            { id: "TK-1025", subjAr: "Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ±", subjEn: "Login issue with Attendance System", req: "Mansour Al-Yami", date: "2026-01-08", prio: "high", status: "open" },
            { id: "TK-1024", subjAr: "Ø·Ù„Ø¨ ØªØ«Ø¨ÙŠØª Office 365", subjEn: "Install Office 365 Request", req: "Ayman Almaghrabi", date: "2026-01-07", prio: "low", status: "open" }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            updatePageLanguage();
        });

        window.updatePageLanguage = function() {
            const lang = localStorage.getItem('lang') || 'ar';
            const dict = t[lang];
            
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

            // Text
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(dict[key]) el.innerText = dict[key];
            });
            // Placeholders
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if(dict[key]) el.placeholder = dict[key];
            });

            renderTickets();
        }

        // --- Tab Switching ---
        window.switchTab = function(target) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(el => {
                el.classList.remove('bg-white', 'text-brandBlue', 'shadow-sm');
                el.classList.add('text-slate-500');
            });
            document.getElementById(`tab-${target}`).classList.remove('hidden');
            document.getElementById(`btn-${target}`).classList.add('bg-white', 'text-brandBlue', 'shadow-sm');
            document.getElementById(`btn-${target}`).classList.remove('text-slate-500', 'border-transparent');
        }

        // --- Render Functions ---
        window.renderTickets = function() {
            const lang = localStorage.getItem('lang') || 'ar';
            const dict = t[lang];
            const tbody = document.getElementById('ticketsTable');
            const search = document.getElementById('ticketSearch').value.toLowerCase();

            const filtered = tickets.filter(e => e.id.toLowerCase().includes(search));

            tbody.innerHTML = filtered.map(e => {
                let statusBadge = e.status === 'open' 
                    ? `<span class="px-2 py-1 rounded text-[10px] font-bold bg-red-50 text-red-600 border border-red-200">${dict.statOpen}</span>`
                    : `<span class="px-2 py-1 rounded text-[10px] font-bold bg-green-50 text-green-600 border border-green-200">${dict.statClosed}</span>`;

                let priorityClass = e.prio === 'high' 
                    ? 'text-red-500 font-bold' 
                    : (e.prio === 'medium' ? 'text-orange-500' : 'text-green-500');
                let priorityLabel = e.prio === 'high' ? dict.prioHigh : (e.prio === 'medium' ? dict.prioMed : dict.prioLow);

                const subj = lang === 'ar' ? e.subjAr : e.subjEn;

                return `
                <tr class="hover:bg-slate-50 dark:hover:bg-slate-700/50 transition border-b border-slate-100 dark:border-slate-700">
                    <td class="p-4 font-mono text-xs font-bold text-brandBlue">#${e.id}</td>
                    <td class="p-4 text-xs font-bold text-slate-700 dark:text-white">${subj}</td>
                    <td class="p-4 text-xs text-slate-600 dark:text-slate-300">${e.req}</td>
                    <td class="p-4 font-en text-xs text-slate-500">${e.date}</td>
                    <td class="p-4 text-xs ${priorityClass}">${priorityLabel}</td>
                    <td class="p-4 text-center">${statusBadge}</td>
                    <td class="p-4 text-center">
                        <button class="text-slate-400 hover:text-brandBlue"><i class="fa-solid fa-pen-to-square"></i></button>
                    </td>
                </tr>
            `}).join('');
        }

        window.filterTickets = function() {
            renderTickets();
        }

        // --- Modals ---
        window.openTicketModal = function() {
            document.getElementById('ticketModal').classList.remove('hidden');
        }

        // --- Bot Override for IT Context ---
        const originalGetAIResponse = window.getAIResponse; 
        
        window.getAIResponse = function(query, isArabic) {
            const q = query.toLowerCase();
            
            if (q.includes('ticket') || q.includes('support') || q.includes('ØªØ°ÙƒØ±Ø©') || q.includes('Ø¯Ø¹Ù…')) {
                return isArabic 
                    ? `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ°Ø§ÙƒØ± Ø§Ù„Ù…ÙØªÙˆØ­Ø©: <b>12</b>. ØªÙˆØ¬Ø¯ ØªØ°ÙƒØ±Ø© Ø°Ø§Øª Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø¨Ø®ØµÙˆØµ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ±.`
                    : `Total Open Tickets: <b>12</b>. There is a high priority ticket regarding Attendance System.`;
            }
            
            if (q.includes('alert') || q.includes('security') || q.includes('ØªÙ†Ø¨ÙŠÙ‡') || q.includes('Ø£Ù…Ù†ÙŠ') || q.includes('Ø§Ù…Ù†ÙŠ')) {
                return isArabic
                    ? `ØªÙˆØ¬Ø¯ <b>2 ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø£Ù…Ù†ÙŠØ©</b>: Ù…Ø­Ø§ÙˆÙ„Ø© Ø¯Ø®ÙˆÙ„ Ù…Ø´Ø¨ÙˆÙ‡Ø© ÙˆØ¨Ø±Ø§Ù…Ø¬ ØºÙŠØ± Ù…ØµØ±Ø­Ø©.`
                    : `There are <b>2 Security Alerts</b>: Suspicious login attempt and Unauthorized software.`;
            }

            if (q.includes('asset') || q.includes('device') || q.includes('Ø£ØµÙ„') || q.includes('Ø¬Ù‡Ø§Ø²')) {
                return isArabic
                    ? `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠØ©: <b>145</b>. ØªÙ… ØªØ®ØµÙŠØµ MacBook Pro Ù„Ù„Ù…ÙˆØ¸Ù Ù‡Ø´Ø§Ù… Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ.`
                    : `Total IT Assets: <b>145</b>. MacBook Pro assigned to Hesham Al-Suhaibani.`;
            }

            // Fallback default
            return isArabic
                ? `ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ø¹Ù†: <b>Ø§Ù„ØªØ°Ø§ÙƒØ±</b>ØŒ <b>Ø§Ù„Ø£ØµÙˆÙ„</b>ØŒ Ø£Ùˆ <b>Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</b>.`
                : `I can answer about: <b>Tickets</b>, <b>Assets</b>, or <b>Cybersecurity</b>.`;
        }

    </script>
</body>
</html>
