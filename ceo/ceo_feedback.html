<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#FB4747">
    <title data-i18n="pageTitle">صندوق الشكاوي | AndroGov</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { brandRed: '#FB4747', brandDark: '#0F172A', moneyGreen: '#10B981', alertOrange: '#F59E0B' },
                    fontFamily: { sans: ['Tajawal', 'Inter', 'sans-serif'], en: ['Inter', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>.num-font { font-family: 'Inter', sans-serif; font-feature-settings: "tnum"; }</style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100 font-sans transition-colors duration-300 opacity-0">

    <div id="sidebar-container"></div>
    
    <div class="main-content-wrapper transition-all duration-300 flex flex-col min-h-screen">
        <div id="header-container"></div>

        <main class="p-8 space-y-8">
            
            <div class="flex flex-col md:flex-row justify-between items-end gap-6 bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brandRed to-orange-500"></div>
                
                <div class="relative z-10">
                    <h1 class="text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2 mb-2">
                        <i class="fa-solid fa-inbox text-brandRed"></i> <span data-i18n="headerTitle">صندوق الشكاوي والمقترحات</span>
                    </h1>
                    <p class="text-sm text-slate-500 mt-1 max-w-2xl" data-i18n="headerDesc">قناة التواصل المباشرة للاستماع لصوت الموظفين والمساهمة في تحسين بيئة العمل.</p>
                </div>
                
                <div class="flex gap-3 relative z-10">
                    <div class="flex items-center gap-2 bg-slate-100 dark:bg-slate-700 rounded-lg p-1">
                        <button class="px-4 py-2 bg-white dark:bg-slate-600 shadow-sm rounded-md text-xs font-bold text-slate-800 dark:text-white transition" data-i18n="filterAll">الكل</button>
                        <button class="px-4 py-2 text-xs font-bold text-slate-500 dark:text-slate-400 hover:text-slate-800 transition" data-i18n="filterUnread">غير مقروء</button>
                        <button class="px-4 py-2 text-xs font-bold text-slate-500 dark:text-slate-400 hover:text-slate-800 transition" data-i18n="filterUrgent">عاجل</button>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-center gap-4">
                    <div class="w-14 h-14 rounded-full bg-blue-50 dark:bg-blue-900/20 text-blue-600 flex items-center justify-center text-2xl"><i class="fa-solid fa-lightbulb"></i></div>
                    <div>
                        <h3 class="text-3xl font-bold num-font text-slate-900 dark:text-white">15</h3>
                        <p class="text-xs text-slate-500 uppercase tracking-wider" data-i18n="statIdeas">مقترحات تطويرية</p>
                    </div>
                </div>
                <div class="bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-center gap-4">
                    <div class="w-14 h-14 rounded-full bg-red-50 dark:bg-red-900/20 text-red-600 flex items-center justify-center text-2xl"><i class="fa-solid fa-triangle-exclamation"></i></div>
                    <div>
                        <h3 class="text-3xl font-bold num-font text-slate-900 dark:text-white">3</h3>
                        <p class="text-xs text-slate-500 uppercase tracking-wider" data-i18n="statComplaints">شكاوي نشطة</p>
                    </div>
                </div>
                <div class="bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-center gap-4">
                    <div class="w-14 h-14 rounded-full bg-green-50 dark:bg-green-900/20 text-green-600 flex items-center justify-center text-2xl"><i class="fa-solid fa-check-double"></i></div>
                    <div>
                        <h3 class="text-3xl font-bold num-font text-slate-900 dark:text-white">42</h3>
                        <p class="text-xs text-slate-500 uppercase tracking-wider" data-i18n="statResolved">تمت معالجتها</p>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                
                <div class="bg-white dark:bg-slate-800 rounded-2xl p-5 shadow-sm border-r-4 border-red-500 hover:shadow-md transition cursor-pointer group" onclick="openMessage('msg1')">
                    <div class="flex justify-between items-start mb-2">
                        <div class="flex items-center gap-3">
                            <span class="bg-red-100 text-red-700 text-[10px] px-2 py-0.5 rounded font-bold" data-i18n="tagComplaint">شكوى</span>
                            <span class="bg-slate-100 text-slate-600 text-[10px] px-2 py-0.5 rounded font-bold flex items-center gap-1"><i class="fa-solid fa-user-secret"></i> <span data-i18n="tagAnon">مجهول</span></span>
                            <h3 class="font-bold text-slate-900 dark:text-white group-hover:text-brandRed transition" data-i18n="msg1Title">تجاوزات إدارية في فرع الشمال</h3>
                        </div>
                        <span class="text-[10px] text-slate-400 num-font" data-i18n="time2h">2h ago</span>
                    </div>
                    <p class="text-sm text-slate-500 dark:text-slate-400 line-clamp-2" data-i18n="msg1Desc">أود الإبلاغ عن وجود محسوبيات في توزيع الورديات الإضافية (Overtime) في فرع الشمال، حيث يتم إسنادها لأشخاص محددين دون غيرهم...</p>
                </div>

                <div class="bg-white dark:bg-slate-800 rounded-2xl p-5 shadow-sm border-r-4 border-blue-500 hover:shadow-md transition cursor-pointer group" onclick="openMessage('msg2')">
                    <div class="flex justify-between items-start mb-2">
                        <div class="flex items-center gap-3">
                            <span class="bg-blue-100 text-blue-700 text-[10px] px-2 py-0.5 rounded font-bold" data-i18n="tagSuggest">مقترح</span>
                            <h3 class="font-bold text-slate-900 dark:text-white group-hover:text-blue-600 transition" data-i18n="msg2Title">تحسين سياسة العمل عن بعد</h3>
                        </div>
                        <span class="text-[10px] text-slate-400 num-font" data-i18n="timeYesterday">Yesterday</span>
                    </div>
                    <p class="text-sm text-slate-500 dark:text-slate-400 line-clamp-2" data-i18n="msg2Desc">أقترح زيادة عدد أيام العمل عن بعد للموظفين الذين يحققون المستهدفات بنسبة 100% كنوع من الحافز المعنوي...</p>
                    <div class="mt-3 flex items-center gap-2">
                        <img src="https://ui-avatars.com/api/?name=Sarah+A&background=random" class="w-5 h-5 rounded-full">
                        <span class="text-xs text-slate-400" data-i18n="msg2User">سارة الأحمد - Marketing</span>
                    </div>
                </div>

                <div class="bg-white dark:bg-slate-800 rounded-2xl p-5 shadow-sm border-r-4 border-slate-300 hover:shadow-md transition cursor-pointer group opacity-75">
                    <div class="flex justify-between items-start mb-2">
                        <div class="flex items-center gap-3">
                            <span class="bg-slate-100 text-slate-600 text-[10px] px-2 py-0.5 rounded font-bold" data-i18n="tagInquiry">استفسار</span>
                            <span class="text-green-600 text-[10px] font-bold flex items-center gap-1"><i class="fa-solid fa-check"></i> <span data-i18n="tagReplied">تم الرد</span></span>
                            <h3 class="font-bold text-slate-900 dark:text-white" data-i18n="msg3Title">موعد صرف البونص السنوي</h3>
                        </div>
                        <span class="text-[10px] text-slate-400 num-font" data-i18n="time3d">3 days ago</span>
                    </div>
                    <p class="text-sm text-slate-500 dark:text-slate-400 line-clamp-2" data-i18n="msg3Desc">متى سيتم إيداع البونص السنوي في الحسابات؟ وهل يشمل الموظفين الجدد؟</p>
                </div>

            </div>

        </main>
    </div>

    <div id="messageModal" class="fixed inset-0 bg-black/60 hidden z-50 flex items-center justify-center backdrop-blur-sm p-4">
        <div class="bg-white dark:bg-slate-800 w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden animate-fade-in-up">
            
            <div class="bg-slate-50 dark:bg-slate-700/50 p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-start">
                <div>
                    <div class="flex items-center gap-3 mb-2">
                        <span class="bg-red-100 text-red-700 text-[10px] px-2 py-0.5 rounded font-bold" data-i18n="tagComplaint">شكوى</span>
                        <span class="text-xs text-slate-400 num-font">#TICKET-209</span>
                    </div>
                    <h3 class="text-lg font-bold text-slate-900 dark:text-white" data-i18n="msg1Title">تجاوزات إدارية في فرع الشمال</h3>
                </div>
                <button onclick="document.getElementById('messageModal').classList.add('hidden')" class="text-slate-400 hover:text-red-500 transition"><i class="fa-solid fa-xmark text-xl"></i></button>
            </div>

            <div class="p-6 h-64 overflow-y-auto custom-scroll text-sm text-slate-600 dark:text-slate-300 leading-relaxed">
                <p data-i18n="detailP1">سعادة الرئيس التنفيذي،</p>
                <br>
                <p data-i18n="detailP2">أود الإبلاغ عن وجود محسوبيات واضحة في توزيع ساعات العمل الإضافية (Overtime) في فرع الشمال. يتم إسناد الساعات الإضافية بشكل متكرر لمجموعة محددة من الموظفين المقربين من مدير الفرع، بينما يتم تجاهل باقي الفريق رغم حاجتهم ورغبتهم في العمل.</p>
                <br>
                <p data-i18n="detailP3">هذا التصرف يؤثر سلباً على معنويات الفريق ويخلق بيئة عمل غير عادلة. نرجو من سعادتكم التوجيه بالتحقيق في سجلات الحضور والانصراف ومسيرات الرواتب للتأكد من صحة هذه المعلومات.</p>
                <br>
                <p data-i18n="detailP4">مقدمه: فاعل خير (موظف في الفرع)</p>
            </div>

            <div class="p-6 border-t border-slate-100 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/30 flex justify-between items-center">
                <div class="flex gap-2">
                    <button class="px-4 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-white text-xs font-bold rounded-xl hover:bg-slate-50 transition" onclick="alert('Saved')" data-i18n="btnSave">
                        <i class="fa-regular fa-bookmark"></i> حفظ
                    </button>
                    <button class="px-4 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-white text-xs font-bold rounded-xl hover:bg-slate-50 transition" onclick="alert('Forwarded to HR')" data-i18n="btnForward">
                        <i class="fa-solid fa-share"></i> تحويل لـ HR
                    </button>
                </div>
                <button class="px-6 py-2 bg-brandRed text-white text-xs font-bold rounded-xl hover:bg-red-700 shadow-md transition" onclick="alert('Open Reply Box')" data-i18n="btnReply">
                    <i class="fa-solid fa-reply"></i> رد / توجيه
                </button>
            </div>
        </div>
    </div>

    <script src="layout-ceo.js"></script>
    <script src="bot.js"></script>

    <script>
        const pageContent = {
            ar: {
                pageTitle: "صندوق الشكاوي | AndroGov",
                headerTitle: "صندوق الشكاوي والمقترحات",
                headerDesc: "قناة التواصل المباشرة للاستماع لصوت الموظفين والمساهمة في تحسين بيئة العمل.",
                filterAll: "الكل",
                filterUnread: "غير مقروء",
                filterUrgent: "عاجل",
                statIdeas: "مقترحات تطويرية",
                statComplaints: "شكاوي نشطة",
                statResolved: "تمت معالجتها",
                tagComplaint: "شكوى",
                tagAnon: "مجهول",
                tagSuggest: "مقترح",
                tagInquiry: "استفسار",
                tagReplied: "تم الرد",
                msg1Title: "تجاوزات إدارية في فرع الشمال",
                msg1Desc: "أود الإبلاغ عن وجود محسوبيات في توزيع الورديات الإضافية (Overtime) في فرع الشمال...",
                time2h: "منذ ساعتين",
                msg2Title: "تحسين سياسة العمل عن بعد",
                msg2Desc: "أقترح زيادة عدد أيام العمل عن بعد للموظفين الذين يحققون المستهدفات بنسبة 100%...",
                msg2User: "سارة الأحمد - التسويق",
                timeYesterday: "أمس",
                msg3Title: "موعد صرف البونص السنوي",
                msg3Desc: "متى سيتم إيداع البونص السنوي في الحسابات؟ وهل يشمل الموظفين الجدد؟",
                time3d: "منذ 3 أيام",
                detailP1: "سعادة الرئيس التنفيذي،",
                detailP2: "أود الإبلاغ عن وجود محسوبيات واضحة في توزيع ساعات العمل الإضافية...",
                detailP3: "هذا التصرف يؤثر سلباً على معنويات الفريق...",
                detailP4: "مقدمه: فاعل خير (موظف في الفرع)",
                btnSave: "حفظ",
                btnForward: "تحويل لـ HR",
                btnReply: "رد / توجيه"
            },
            en: {
                pageTitle: "Feedback | AndroGov",
                headerTitle: "Feedback & Complaints",
                headerDesc: "Direct channel to hear employee voices and improve the work environment.",
                filterAll: "All",
                filterUnread: "Unread",
                filterUrgent: "Urgent",
                statIdeas: "Suggestions",
                statComplaints: "Active Complaints",
                statResolved: "Resolved",
                tagComplaint: "Complaint",
                tagAnon: "Anonymous",
                tagSuggest: "Suggestion",
                tagInquiry: "Inquiry",
                tagReplied: "Replied",
                msg1Title: "Administrative issues in North Branch",
                msg1Desc: "I would like to report favoritism in assigning Overtime shifts in the North Branch...",
                time2h: "2h ago",
                msg2Title: "Remote Work Policy Enhancement",
                msg2Desc: "I suggest increasing remote work days for employees achieving 100% of targets...",
                msg2User: "Sarah Al-Ahmed - Marketing",
                timeYesterday: "Yesterday",
                msg3Title: "Annual Bonus Payment Date",
                msg3Desc: "When will the annual bonus be deposited? Does it cover new hires?",
                time3d: "3 days ago",
                detailP1: "Dear CEO,",
                detailP2: "I would like to report clear favoritism in assigning Overtime shifts...",
                detailP3: "This behavior negatively affects team morale...",
                detailP4: "Sender: Anonymous (Branch Employee)",
                btnSave: "Save",
                btnForward: "Forward to HR",
                btnReply: "Reply / Forward"
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const lang = localStorage.getItem('lang') || 'ar';
            const dict = pageContent[lang];
            
            document.documentElement.lang = lang;
            document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(dict[key]) {
                    // Check if there's an icon inside, preserve it
                    if (el.children.length > 0) {
                        const icon = el.innerHTML.match(/<i.*><\/i>/);
                        if (icon) {
                            el.innerHTML = icon[0] + ' ' + dict[key];
                        } else {
                            el.innerText = dict[key];
                        }
                    } else {
                        el.innerText = dict[key];
                    }
                }
            });
        });

        function openMessage(id) {
            document.getElementById('messageModal').classList.remove('hidden');
        }
    </script>
</body>
</html>
