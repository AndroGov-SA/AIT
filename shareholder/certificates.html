<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ù‡Ù… | AndroGov</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { brandRed: '#FB4747', brandDark: '#1E293B' },
                    fontFamily: { sans: ['Tajawal', 'sans-serif'], serif: ['Playfair Display', 'serif'] }
                }
            }
        }
    </script>
    <style>
        .certificate-pattern {
            background-image: radial-gradient(#FB4747 0.5px, transparent 0.5px), radial-gradient(#FB4747 0.5px, #fff 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            opacity: 0.05;
        }
        @media print {
            body * { visibility: hidden; }
            #certContainer, #certContainer * { visibility: visible; }
            #certContainer { position: absolute; left: 0; top: 0; width: 100%; margin: 0; padding: 0; border: none; box-shadow: none; }
            .no-print { display: none !important; }
        }
        .animate-spin-slow { animation: spin 8s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-white font-sans transition-colors duration-300">

    <div id="sidebar-container" class="no-print"></div>

    <div class="main-content-wrapper transition-all duration-300">
        <div id="header-container" class="no-print"></div>

        <main class="p-8 max-w-5xl mx-auto">
            
            <div class="flex items-center justify-between mb-8 no-print">
                <div>
                    <h1 class="text-2xl font-bold flex items-center gap-2">
                        <i class="fa-solid fa-file-contract text-brandRed"></i> Ø³Ø¬Ù„ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…ÙŠÙ† ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª
                    </h1>
                    <p class="text-slate-500 text-sm mt-1">Ø´Ù‡Ø§Ø¯Ø© Ù…Ù„ÙƒÙŠØ© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø© Ù„Ù„Ù…Ø³Ø§Ù‡Ù…ÙŠÙ†.</p>
                </div>
                <button onclick="window.print()" class="px-5 py-2 bg-slate-800 text-white rounded-xl hover:bg-slate-700 transition flex items-center gap-2 shadow-lg">
                    <i class="fa-solid fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©
                </button>
            </div>

            <div id="certContainer" class="bg-white text-slate-800 relative p-10 md:p-16 border-[10px] border-double border-slate-200 shadow-2xl mx-auto max-w-4xl min-h-[700px] flex flex-col justify-between overflow-hidden">
                <div class="absolute inset-0 certificate-pattern pointer-events-none"></div>
                <div class="absolute top-0 left-0 w-32 h-32 border-t-[20px] border-l-[20px] border-brandRed/20"></div>
                <div class="absolute bottom-0 right-0 w-32 h-32 border-b-[20px] border-r-[20px] border-brandRed/20"></div>

                <div class="text-center relative z-10">
                    <img src="https://ait.sa/wp-content/uploads/2024/03/cropped-Square-Logo.png" class="w-20 h-20 mx-auto mb-4 grayscale opacity-80">
                    <h2 class="text-4xl font-serif font-bold tracking-wider text-slate-900 mb-2">Ø´Ù‡Ø§Ø¯Ø© Ù…Ù„ÙƒÙŠØ© Ø£Ø³Ù‡Ù…</h2>
                    <p class="text-sm uppercase tracking-[0.2em] text-slate-500">Share Certificate</p>
                </div>

                <div class="text-center space-y-8 my-10 relative z-10">
                    <p class="text-lg text-slate-600">
                        ÙŠØ´Ù‡Ø¯ Ù…Ø¬Ù„Ø³ Ø¥Ø¯Ø§Ø±Ø© <span class="font-bold text-slate-900">Ø´Ø±ÙƒØ© Ø£Ù†Ø¯Ø±ÙˆÙ…ÙŠØ¯Ø§ Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</span> (Ø´.Ù….Ù…)<br>
                        Ø¨Ø£Ù† Ø§Ù„Ù…Ø³Ø§Ù‡Ù… / Ø§Ù„Ù…Ø³Ø§Ù‡Ù…Ø©:
                    </p>
                    
                    <h3 id="shName" class="text-3xl font-bold text-brandRed font-serif border-b-2 border-slate-100 inline-block pb-2 px-8">
                        Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
                    </h3>

                    <p class="text-lg text-slate-600">
                        Ù‡Ùˆ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…Ø³Ø¬Ù„ Ù„Ù€ <span id="shShares" class="font-bold text-slate-900 text-2xl mx-2">0</span> Ø³Ù‡Ù…Ø§Ù‹<br>
                        Ø¨Ù‚ÙŠÙ…Ø© Ø§Ø³Ù…ÙŠØ© Ù‚Ø¯Ø±Ù‡Ø§ (10 Ø±.Ø³) Ù„Ù„Ø³Ù‡Ù… Ø§Ù„ÙˆØ§Ø­Ø¯ Ù…Ø¯ÙÙˆØ¹Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.
                    </p>

                    <div class="grid grid-cols-2 gap-8 max-w-lg mx-auto bg-slate-50 p-6 rounded-xl border border-slate-100">
                        <div>
                            <p class="text-xs text-slate-400 uppercase">Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</p>
                            <p id="shPercent" class="font-bold text-xl">0%</p>
                        </div>
                        <div>
                            <p class="text-xs text-slate-400 uppercase">Ø±Ù‚Ù… Ø§Ù„Ù…Ø³Ø§Ù‡Ù…</p>
                            <p id="shID" class="font-bold text-xl font-mono text-slate-600">---</p>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between items-end mt-8 relative z-10 border-t border-slate-100 pt-8">
                    <div class="text-center">
                        <div class="h-16 flex items-end justify-center mb-2">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/03/Signature_sample.svg/1200px-Signature_sample.svg.png" class="h-10 opacity-60">
                        </div>
                        <p class="text-sm font-bold border-t border-slate-300 pt-2 w-48 mx-auto">Ø£Ù…ÙŠÙ† Ø³Ø± Ø§Ù„Ù…Ø¬Ù„Ø³</p>
                    </div>

                    <div class="relative w-24 h-24 flex items-center justify-center">
                        <div class="absolute inset-0 border-2 border-yellow-500 rounded-full opacity-30 animate-spin-slow"></div>
                        <div class="w-20 h-20 bg-yellow-500 rounded-full flex items-center justify-center text-white shadow-lg shadow-yellow-200">
                            <i class="fa-solid fa-medal text-3xl"></i>
                        </div>
                    </div>

                    <div class="text-center">
                        <div class="h-16 flex items-end justify-center mb-2">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Signature_sample.svg/1200px-Signature_sample.svg.png" class="h-10 opacity-60">
                        </div>
                        <p class="text-sm font-bold border-t border-slate-300 pt-2 w-48 mx-auto">Ø±Ø¦ÙŠØ³ Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</p>
                    </div>
                </div>
                
                <div class="text-[10px] text-center text-slate-300 mt-4 font-mono">
                    System Generated ID: <span id="certSerial">CERT-2026-XXXX</span>
                </div>
            </div>

        </main>
    </div>

    <script src="data/company_policy.js"></script>
    <script src="js/core/i18n.js"></script>
    <script src="js/components/layout.js"></script>
    <script src="js/components/bot.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ØªØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù…Ø­Ø±Ùƒ v10.5
        const ctoUser = {
            id: 'sh_003',
            name: 'ÙˆØ§Ø¦Ù„ Ø§Ù„Ø³Ø­ÙŠØ¨Ø§Ù†ÙŠ',
            displayName: 'Ù…Ø³Ø§Ù‡Ù… ',
            role: 'shareholder', // Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø°ÙŠ ÙŠØ¨Ø­Ø« Ø¹Ù†Ù‡ Ø§Ù„Ù…Ø­Ø±Ùƒ Ù„ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            avatar: 'https://ui-avatars.com/api/?name=Meshail+AlHadyan&background=FB4747&color=fff'
        };
        
        // 2. ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù€ LocalStorage Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªÙ…Ø±Ø§Ø±ÙŠØ© Ø§Ù„Ù…Ø­Ø±Ùƒ
        localStorage.setItem('currentUser', JSON.stringify(ctoUser));
        localStorage.setItem('activeRole', 'shareholder');

        // 3. Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ Ø§Ù„Ù…ÙØ¶Ù„
        if (!localStorage.getItem('theme')) {
            localStorage.setItem('theme', 'light');
        }

        // 4. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ùƒ
        if (typeof Layout !== 'undefined') {
            Layout.init();
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØµÙØ­Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Ù„Ø£Ù† Ø§Ù„Ù€ body Ù„Ù‡ opacity-0)
            document.body.style.opacity = '1';
            console.log("ğŸš€ shareholder Layout Engine v10.5 Started Successfully");
        } else {
            console.error("âŒ Layout.js file not found! Check your script paths.");
        }
    });
        function loadCertificateData(user) {
            // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø£Ùˆ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©
            if (typeof POLICY_DATA !== 'undefined' && POLICY_DATA.shareholders) {
                // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø³Ø§Ù‡Ù… Ø¥Ù…Ø§ Ø¨Ø§Ù„Ù…Ø¹Ø±Ù Ø£Ùˆ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
                const shData = POLICY_DATA.shareholders.find(s => s.id === user.id || s.email === user.email);

                if (shData) {
                    document.getElementById('shName').innerText = shData.name;
                    document.getElementById('shShares').innerText = shData.shares.toLocaleString();
                    document.getElementById('shPercent').innerText = shData.percent + '%';
                    document.getElementById('shID').innerText = shData.id;
                    
                    // ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… ØªØ³Ù„Ø³Ù„ÙŠ Ù„Ù„Ø´Ù‡Ø§Ø¯Ø©
                    const datePart = new Date().getFullYear();
                    const randomPart = Math.floor(Math.random() * 9000) + 1000;
                    document.getElementById('certSerial').innerText = `CERT-${datePart}-${shData.id.split('_')[1]}-${randomPart}`;
                }
            } else {
                console.error("Policy data not found");
            }
        }
    </script>
</body>
</html>
